/**
 * @preserve SeaJS - A Module Loader for the Web
 * v1.3.0 | seajs.org | MIT Licensed
 *//**
 * Base namespace for the framework.
 */this.seajs={_seajs:this.seajs},seajs.version="1.3.0",seajs._util={},seajs._config={debug:"%DEBUG%",preload:[]},function(e){var t=Object.prototype.toString,n=Array.prototype;e.isString=function(e){return t.call(e)==="[object String]"},e.isFunction=function(e){return t.call(e)==="[object Function]"},e.isRegExp=function(e){return t.call(e)==="[object RegExp]"},e.isObject=function(e){return e===Object(e)},e.isArray=Array.isArray||function(e){return t.call(e)==="[object Array]"},e.indexOf=n.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1};var r=e.forEach=n.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)};e.map=n.map?function(e,t){return e.map(t)}:function(e,t){var n=[];return r(e,function(e,r,i){n.push(t(e,r,i))}),n},e.filter=n.filter?function(e,t){return e.filter(t)}:function(e,t){var n=[];return r(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n};var i=e.keys=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};e.unique=function(e){var t={};return r(e,function(e){t[e]=1}),i(t)},e.now=Date.now||function(){return(new Date).getTime()}}(seajs._util),function(e){e.log=function(){if(typeof console=="undefined")return;var e=Array.prototype.slice.call(arguments),t="log",n=e[e.length-1];console[n]&&(t=e.pop());if(t==="log"&&!seajs.debug)return;if(console[t].apply){console[t].apply(console,e);return}var r=e.length;r===1?console[t](e[0]):r===2?console[t](e[0],e[1]):r===3?console[t](e[0],e[1],e[2]):console[t](e.join(" "))}}(seajs._util),function(e,t,n){function u(e){var t=e.match(r);return(t?t[0]:".")+"/"}function a(e){i.lastIndex=0,i.test(e)&&(e=e.replace(i,"$1/"));if(e.indexOf(".")===-1)return e;var t=e.split("/"),n=[],r;for(var s=0;s<t.length;s++){r=t[s];if(r===".."){if(n.length===0)throw new Error("The path is invalid: "+e);n.pop()}else r!=="."&&n.push(r)}return n.join("/")}function f(e){e=a(e);var t=e.charAt(e.length-1);return t==="/"?e:(t==="#"?e=e.slice(0,-1):e.indexOf("?")===-1&&!s.test(e)&&(e+=".js"),e.indexOf(":80/")>0&&(e=e.replace(":80/","/")),e)}function l(e){if(e.charAt(0)==="#")return e.substring(1);var n=t.alias;if(n&&y(e)){var r=e.split("/"),i=r[0];n.hasOwnProperty(i)&&(r[0]=n[i],e=r.join("/"))}return e}function h(n){var r=t.map||[];if(!r.length)return n;var i=n;for(var s=0;s<r.length;s++){var o=r[s];if(e.isArray(o)&&o.length===2){var f=o[0];if(e.isString(f)&&i.indexOf(f)>-1||e.isRegExp(f)&&f.test(i))i=i.replace(f,o[1])}else e.isFunction(o)&&(i=o(i))}return v(i)||(i=a(u(E)+i)),i!==n&&(c[i]=n),i}function p(e){return c[e]||e}function d(e,n){if(!e)return"";e=l(e),n||(n=E);var r;return v(e)?r=e:m(e)?(e.indexOf("./")===0&&(e=e.substring(2)),r=u(n)+e):g(e)?r=n.match(o)[1]+e:r=t.base+"/"+e,f(r)}function v(e){return e.indexOf("://")>0||e.indexOf("//")===0}function m(e){return e.indexOf("./")===0||e.indexOf("../")===0}function g(e){return e.charAt(0)==="/"&&e.charAt(1)!=="/"}function y(e){var t=e.charAt(0);return e.indexOf("://")===-1&&t!=="."&&t!=="/"}function b(e){return e.charAt(0)!=="/"&&(e="/"+e),e}var r=/.*(?=\/.*$)/,i=/([^:\/])\/\/+/g,s=/\.(?:css|js)$/,o=/^(.*?\w)(?:\/|$)/,c={},w=n.location,E=w.protocol+"//"+w.host+b(w.pathname);E.indexOf("\\")>0&&(E=E.replace(/\\/g,"/")),e.dirname=u,e.realpath=a,e.normalize=f,e.parseAlias=l,e.parseMap=h,e.unParseMap=p,e.id2Uri=d,e.isAbsolute=v,e.isRoot=g,e.isTopLevel=y,e.pageUri=E}(seajs._util,seajs._config,this),function(e,t){function f(e,t){e.nodeName==="SCRIPT"?l(e,t):c(e,t)}function l(e,n){e.onload=e.onerror=e.onreadystatechange=function(){o.test(e.readyState)&&(e.onload=e.onerror=e.onreadystatechange=null,e.parentNode&&!t.debug&&r.removeChild(e),e=undefined,n())}}function c(t,n){v||m?(e.log("Start poll to fetch css"),setTimeout(function(){h(t,n)},1)):t.onload=t.onerror=function(){t.onload=t.onerror=null,t=undefined,n()}}function h(e,t){var n;if(v)e.sheet&&(n=!0);else if(e.sheet)try{e.sheet.cssRules&&(n=!0)}catch(r){r.name==="NS_ERROR_DOM_SECURITY_ERR"&&(n=!0)}setTimeout(function(){n?t():h(e,t)},1)}function p(){}var n=document,r=n.head||n.getElementsByTagName("head")[0]||n.documentElement,i=r.getElementsByTagName("base")[0],s=/\.css(?:\?|$)/i,o=/loaded|complete|undefined/,u,a;e.fetch=function(t,n,o){var a=s.test(t),l=document.createElement(a?"link":"script");if(o){var c=e.isFunction(o)?o(t):o;c&&(l.charset=c)}f(l,n||p),a?(l.rel="stylesheet",l.href=t):(l.async="async",l.src=t),u=l,i?r.insertBefore(l,i):r.appendChild(l),u=null},e.getCurrentScript=function(){if(u)return u;if(a&&a.readyState==="interactive")return a;var e=r.getElementsByTagName("script");for(var t=0;t<e.length;t++){var n=e[t];if(n.readyState==="interactive")return a=n,n}},e.getScriptAbsoluteSrc=function(e){return e.hasAttribute?e.src:e.getAttribute("src",4)},e.importStyle=function(e,t){if(t&&n.getElementById(t))return;var i=n.createElement("style");t&&(i.id=t),r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(n.createTextNode(e))};var d=navigator.userAgent,v=Number(d.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"))<536,m=d.indexOf("Firefox")>0&&!("onload"in document.createElement("link"))}(seajs._util,seajs._config,this),function(e){function n(e){return e.replace(/^\s*\/\*[\s\S]*?\*\/\s*$/mg,"").replace(/^\s*\/\/.*$/mg,"")}var t=/(?:^|[^.$])\brequire\s*\(\s*(["'])([^"'\s\)]+)\1\s*\)/g;e.parseDependencies=function(r){var i=[],s;r=n(r),t.lastIndex=0;while(s=t.exec(r))s[2]&&i.push(s[2]);return e.unique(i)}}(seajs._util),function(e,t,n){function u(e,t){this.uri=e,this.status=t||0}function d(e,n){return t.isString(e)?u._resolve(e,n):t.map(e,function(e){return d(e,n)})}function v(e,i){var s=t.parseMap(e);if(f[s]){r[e]=r[s],i();return}if(a[s]){l[s].push(i);return}a[s]=!0,l[s]=[i],u._fetch(s,function(){f[s]=!0;var n=r[e];n.status===o.FETCHING&&(n.status=o.FETCHED),c&&(u._save(e,c),c=null),h&&n.status===o.FETCHED&&(r[e]=h,h.realUri=e),h=null,a[s]&&delete a[s];var i=l[s];i&&(delete l[s],t.forEach(i,function(e){e()}))},n.charset)}function m(e,n){var i=r[e]||(r[e]=new u(e));return i.status<o.SAVED&&(i.id=n.id||e,i.dependencies=d(t.filter(n.dependencies||[],function(e){return!!e}),e),i.factory=n.factory,i.status=o.SAVED),i}function g(e,t){var n=e(t.require,t.exports,t);n!==undefined&&(t.exports=n)}function y(e){return!!i[e.realUri||e.uri]}function b(e){var n=e.realUri||e.uri,r=i[n];r&&(t.forEach(r,function(t){g(t,e)}),delete i[n])}function w(e){var n=e.uri;return t.filter(e.dependencies,function(e){p=[n];var t=E(r[e]);return t&&(p.push(n),S(p)),!t})}function E(e){if(!e||e.status!==o.SAVED)return!1;p.push(e.uri);var t=e.dependencies;if(t.length){if(x(t,p))return!0;for(var n=0;n<t.length;n++)if(E(r[t[n]]))return!0}return p.pop(),!1}function S(e,n){t.log("Found circular dependencies:",e.join(" --> "),n)}function x(e,n){var r=e.concat(n);return r.length>t.unique(r).length}function T(e){var t=n.preload.slice();n.preload=[],t.length?N._use(t,e):e()}var r={},i={},s=[],o={FETCHING:1,FETCHED:2,SAVED:3,READY:4,COMPILING:5,COMPILED:6};u.prototype._use=function(e,n){t.isString(e)&&(e=[e]);var i=d(e,this.uri);this._load(i,function(){T(function(){var e=t.map(i,function(e){return e?r[e]._compile():null});n&&n.apply(null,e)})})},u.prototype._load=function(e,n){function l(e){(e||{}).status<o.READY&&(e.status=o.READY),--a===0&&n()}var i=t.filter(e,function(e){return e&&(!r[e]||r[e].status<o.READY)}),s=i.length;if(s===0){n();return}var a=s;for(var f=0;f<s;f++)(function(e){function n(){t=r[e];if(t.status>=o.SAVED){var n=w(t);n.length?u.prototype._load(n,function(){l(t)}):l(t)}else l()}var t=r[e]||(r[e]=new u(e,o.FETCHING));t.status>=o.FETCHED?n():v(e,n)})(i[f])},u.prototype._compile=function(){function n(t){var n=d(t,e.uri),i=r[n];return i?i.status===o.COMPILING?i.exports:(i.parent=e,i._compile()):null}var e=this;if(e.status===o.COMPILED)return e.exports;if(e.status<o.SAVED&&!y(e))return null;e.status=o.COMPILING,n.async=function(t,n){e._use(t,n)},n.resolve=function(t){return d(t,e.uri)},n.cache=r,e.require=n,e.exports={};var i=e.factory;return t.isFunction(i)?(s.push(e),g(i,e),s.pop()):i!==undefined&&(e.exports=i),e.status=o.COMPILED,b(e),e.exports},u._define=function(e,n,i){var s=arguments.length;s===1?(i=e,e=undefined):s===2&&(i=n,n=undefined,t.isArray(e)&&(n=e,e=undefined)),!t.isArray(n)&&t.isFunction(i)&&(n=t.parseDependencies(i.toString()));var a={id:e,dependencies:n,factory:i},f;if(document.attachEvent){var l=t.getCurrentScript();l&&(f=t.unParseMap(t.getScriptAbsoluteSrc(l))),f||t.log("Failed to derive URI from interactive script for:",i.toString(),"warn")}var p=e?d(e):f;if(p){if(p===f){var v=r[f];v&&v.realUri&&v.status===o.SAVED&&(r[f]=null)}var m=u._save(p,a);f?(r[f]||{}).status===o.FETCHING&&(r[f]=m,m.realUri=f):h||(h=m)}else c=a},u._getCompilingModule=function(){return s[s.length-1]},u._find=function(e){var n=[];return t.forEach(t.keys(r),function(i){if(t.isString(e)&&i.indexOf(e)>-1||t.isRegExp(e)&&e.test(i)){var s=r[i];s.exports&&n.push(s.exports)}}),n},u._modify=function(t,n){var s=d(t),u=r[s];return u&&u.status===o.COMPILED?g(n,u):(i[s]||(i[s]=[]),i[s].push(n)),e},u.STATUS=o,u._resolve=t.id2Uri,u._fetch=t.fetch,u._save=m;var a={},f={},l={},c=null,h=null,p=[],N=new u(t.pageUri,o.COMPILED);e.use=function(t,n){return T(function(){N._use(t,n)}),e},e.define=u._define,e.cache=u.cache=r,e.find=u._find,e.modify=u._modify,u.fetchedList=f,e.pluginSDK={Module:u,util:t,config:n}}(seajs,seajs._util,seajs._config),function(e,t,n){function l(){n.debug&&(e.debug=!!n.debug)}function c(e){if(e.indexOf("??")===-1)return e;var n=e.split("??"),r=n[0],i=t.filter(n[1].split(","),function(e){return e.indexOf("sea.js")!==-1});return r+i[0]}function h(e,n,r){e&&e!==n&&t.log("The alias config is conflicted:","key =",'"'+r+'"',"previous =",'"'+e+'"',"current =",'"'+n+'"',"warn")}var r="seajs-ts=",i=r+t.now(),s=document.getElementById("seajsnode");if(!s){var o=document.getElementsByTagName("script");s=o[o.length-1]}var u=s&&t.getScriptAbsoluteSrc(s)||t.pageUri,a=t.dirname(c(u));t.loaderDir=a;var f=a.match(/^(.+\/)seajs\/[\.\d]+(?:-dev)?\/$/);f&&(a=f[1]),n.base=a,n.main=s&&s.getAttribute("data-main"),n.charset="utf-8",e.config=function(s){for(var o in s){if(!s.hasOwnProperty(o))continue;var u=n[o],a=s[o];if(u&&o==="alias"){for(var f in a)if(a.hasOwnProperty(f)){var c=u[f],p=a[f];/^\d+\.\d+\.\d+$/.test(p)&&(p=f+"/"+p+"/"+f),h(c,p,f),u[f]=p}}else!u||o!=="map"&&o!=="preload"?n[o]=a:(t.isString(a)&&(a=[a]),t.forEach(a,function(e){e&&u.push(e)}))}var d=n.base;return d&&!t.isAbsolute(d)&&(n.base=t.id2Uri((t.isRoot(d)?"":"./")+d+"/")),n.debug===2&&(n.debug=1,e.config({map:[[/^.*$/,function(e){return e.indexOf(r)===-1&&(e+=(e.indexOf("?")===-1?"?":"&")+i),e}]]})),l(),this},l()}(seajs,seajs._util,seajs._config),function(e,t,n){function r(){var e=[],r=n.location.search;return r=r.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),r+=" "+document.cookie,r.replace(/seajs-(\w+)=[1-9]/g,function(t,n){e.push(n)}),t.unique(e)}e.log=t.log,e.importStyle=t.importStyle,e.config({alias:{seajs:t.loaderDir}}),t.forEach(r(),function(t){e.use("seajs/plugin-"+t),t==="debug"&&(e._use=e.use,e._useArgs=[],e.use=function(){return e._useArgs.push(arguments),e})})}(seajs,seajs._util,this),function(e,t,n){var r=e._seajs;if(r&&!r.args){n.seajs=e._seajs;return}n.define=e.define,t.main&&e.use(t.main),function(t){if(t){var n={0:"config",1:"use",2:"define"};for(var r=0;r<t.length;r+=2)e[n[t[r]]].apply(e,t[r+1])}}((r||0).args),n.define.cmd={},delete e.define,delete e._util,delete e._config,delete e._seajs}(seajs,seajs._config,this);var loaderPath=seajs.pluginSDK.util.loaderDir;seajs.config({map:[[".js","-min.js"]],alias:{bui:loaderPath},charset:"utf-8"});var BUI=BUI||{};BUI.use=seajs.use,BUI.config=seajs.config,BUI.setDebug=function(e){BUI.debug=e,e?seajs.config({map:[["-min.js",".js"]]}):seajs.config({map:[[".js","-min.js"]]})},define("bui/common",["bui/ua","bui/json","bui/date","bui/array","bui/keycode","bui/observable","bui/observable","bui/base","bui/component"],function(e){var t=e("bui/util");return t.mix(t,{UA:e("bui/ua"),JSON:e("bui/json"),Date:e("bui/date"),Array:e("bui/array"),KeyCode:e("bui/keycode"),Observable:e("bui/observable"),Base:e("bui/base"),Component:e("bui/component")}),t});var BUI=BUI||{};define("bui/util",function(){(function(e){e.fn&&(e.fn.on=e.fn.on||e.fn.bind,e.fn.off=e.fn.off||e.fn.unbind)})(jQuery);var e=window,t=document,n=Object.prototype,r=n.toString,i="ATTRS",s="PARSER",o="guid";$.extend(BUI,{version:1,subVersion:2,isFunction:function(e){return typeof e=="function"},isArray:"isArray"in Array?Array.isArray:function(e){return r.call(e)==="[object Array]"},isDate:function(e){return r.call(e)==="[object Date]"},isObject:r.call(null)==="[object Object]"?function(e){return e!==null&&e!==undefined&&r.call(e)==="[object Object]"&&e.ownerDocument===undefined}:function(e){return r.call(e)==="[object Object]"},augment:function(e,t){if(!BUI.isFunction(e))return e;for(var n=1;n<arguments.length;n++)BUI.mix(e.prototype,arguments[n].prototype||arguments[n]);return e},cloneObject:function(e){var t=BUI.isArray(e)?[]:{};return BUI.mix(!0,t,e)},error:function(e){if(BUI.debug)throw e},extend:function(e,t,n,r){BUI.isFunction(t)||(n=t,t=e,e=function(){});var i=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;var r=new n;return r.constructor=t,r},s=i(t.prototype,e);return e.prototype=BUI.mix(s,e.prototype),e.superclass=i(t.prototype,t),BUI.mix(s,n),BUI.mix(e,r),e},guid:function(){var e={};return function(t){return t=t||BUI.prefix+o,e[t]?e[t]+=1:e[t]=1,t+e[t]}}(),isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"},log:function(t){BUI.debug&&e.console&&e.console.log&&e.console.log(t)},merge:function(){var e=$.makeArray(arguments);return e.unshift({}),BUI.mix.apply(null,e)},mix:function(){return $.extend.apply(null,arguments)},app:function(e){return window[e]||(window[e]={namespace:function(t){return BUI.namespace(t,window[e])}}),window[e]},mixin:function(e,t,n){n=n||[i,s];var r=t;if(r){e.mixins=r;var o={},u=r.concat(e);BUI.each(u,function(e){e&&BUI.each(n,function(t){e[t]&&(o[t]=o[t]||{},BUI.mix(!0,o[t],e[t]))})}),BUI.each(o,function(t,n){e[n]=t});var a={};BUI.each(u,function(e){if(e){var t=e.prototype;for(var n in t)t.hasOwnProperty(n)&&(a[n]=t[n])}}),BUI.each(a,function(t,n){e.prototype[n]=t})}return e},namespace:function(e,t){t=t||BUI;if(!e)return t;var n=e.split("."),r=t;for(var i=0;i<n.length;i++){var s=n[i];r[s]||(r[s]={}),r=r[s]}return r},prefix:"bui-",substitute:function(e,t,n){return!BUI.isString(e)||!BUI.isObject(t)&&!BUI.isArray(t)?e:e.replace(n||/\\?\{([^{}]+)\}/g,function(e,n){return e.charAt(0)==="\\"?e.slice(1):t[n]===undefined?"":t[n]})},ucfirst:function(e){return e+="",e.charAt(0).toUpperCase()+e.substring(1)},isInView:function(e){var t=e.left,n=e.top,r=BUI.viewportWidth(),i=BUI.viewportHeight(),s=BUI.scrollTop(),o=BUI.scrollLeft();return t<o||t>o+r?!1:n<s||n>s+i?!1:!0},isInVerticalView:function(e){var t=BUI.viewportHeight(),n=BUI.scrollTop();return e<n||e>n+t?!1:!0},isInHorizontalView:function(e){var t=BUI.viewportWidth(),n=BUI.scrollLeft();return e<n||e>n+t?!1:!0},viewportWidth:function(){return $(window).width()},viewportHeight:function(){return $(window).height()},scrollLeft:function(){return $(window).scrollLeft()},scrollTop:function(){return $(window).scrollTop()},docWidth:function(){var e=document.documentElement||document.body;return $(e).width()},docHeight:function(){var e=document.documentElement||document.body;return $(e).height()},each:function(e,t){if(!e)return;$.each(e,function(e,n){return t(n,e)})},wrapBehavior:function(e,t){return e["__bui_wrap_"+t]=function(n){e.get("disabled")||e[t](n)}},getWrapBehavior:function(e,t){return e["__bui_wrap_"+t]}});var u=BUI.FormHelper={serializeToObject:function(e){var t=$(e).serializeArray(),n={};return BUI.each(t,function(e){var t=e.name;n[t]?(BUI.isArray(n[t])||(n[t]=[n[t]]),n[t].push(e.value)):n[t]=e.value}),n},setFields:function(e,t){for(var n in t)t.hasOwnProperty(n)&&BUI.FormHelper.setField(e,n,t[n])},clear:function(e){var t=$.makeArray(e.elements);BUI.each(t,function(e){e.type==="checkbox"||e.type==="radio"?$(e).attr("checked",!1):$(e).val(""),$(e).change()})},setField:function(e,t,n){var r=e.elements[t];BUI.isArray(r)?BUI.each(r,function(e){e.type==="checkbox"?(e.value===n||BUI.Array.indexOf(e.value,n)!==-1)&&$(e).attr("checked",!0):e.type==="radio"&&e.value===n?$(e).attr("checked",!0):$(e).val(n)}):$(r).val(n)},getField:function(e,t){return BUI.FormHelper.serializeToObject(e)[t]}};return BUI}),define("bui/array",["bui/util"],function(e){var t=e("bui/util");return t.Array={peek:function(e){return e[e.length-1]},indexOf:function(e,t,n){var r=n==null?0:n<0?Math.max(0,t.length+n):n;for(var i=r;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1},contains:function(e,n){return t.Array.indexOf(e,n)>=0},each:t.each,equals:function(e,t){if(e==t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;var n=!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r]){n=!1;break}return n},filter:function(e,n){var r=[];return t.Array.each(e,function(e,t){n(e,t)&&r.push(e)}),r},map:function(e,n){var r=[];return t.Array.each(e,function(e,t){r.push(n(e,t))}),r},find:function(e,n){var r=t.Array.findIndex(e,n);return r<0?null:e[r]},findIndex:function(e,n){var r=-1;return t.Array.each(e,function(e,t){if(n(e,t))return r=t,!1}),r},isEmpty:function(e){return e.length==0},add:function(e,t){e.push(t)},addAt:function(e,n,r){t.Array.splice(e,r,0,n)},empty:function(e){if(!(e instanceof Array))for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0},remove:function(e,n){var r=t.Array.indexOf(n,e),i;return(i=r>=0)&&t.Array.removeAt(e,r),i},removeAt:function(e,n){return t.Array.splice(e,n,1).length==1},slice:function(e,t,n){return arguments.length<=2?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},splice:function(e,n,r,i){return Array.prototype.splice.apply(e,t.Array.slice(arguments,1))}},t.Array}),define("bui/observable",["bui/util"],function(e){function r(){return new n}var t=e("bui/util"),n=function(){this._init()};t.augment(n,{_functions:null,_init:function(){var e=this;e._functions=[]},add:function(e){this._functions.push(e)},remove:function(e){var n=this._functions;index=t.Array.indexOf(e,n),index>=0&&n.splice(index,1)},empty:function(){var e=this._functions.length;this._functions.splice(0,e)},fireWith:function(e,n){var r=this,i;return t.each(r._functions,function(t){i=t.apply(e,n);if(i===!1)return!1}),i}});var i=function(e){this._events=[],this._eventMap={},this._bubblesEvents=[],this._initEvents(e)};return t.augment(i,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(e){var t=this,n=t._eventMap;return n[e]},_initEvents:function(e){var t=this,n=null;if(!e)return;n=e.listeners||{},e.handler&&(n.click=e.handler);if(n)for(var r in n)n.hasOwnProperty(r)&&t.on(r,n[r])},_isBubbles:function(e){return t.Array.indexOf(e,this._bubblesEvents)>=0},addTarget:function(e){this._bubbleTarget=e},addEvents:function(e){function o(e){t.Array.indexOf(e,i)===-1&&(s[e]=r(),i.push(e))}var n=this,i=n._events,s=n._eventMap;t.isArray(e)?$.each(e,function(e,t){o(t)}):o(e)},clearListeners:function(){var e=this,t=e._eventMap;for(var n in t)t.hasOwnProperty(n)&&t[n].empty()},fire:function(e,t){var n=this,r=n._getCallbacks(e),i=$.makeArray(arguments),s;t||(t={},i.push(t)),t.target||(t.target=n),r&&(s=r.fireWith(n,Array.prototype.slice.call(i,1)));if(n._isBubbles(e)){var o=n._bubbleTarget;o&&o.fire&&o.fire(e,t)}return s},on:function(e,n){var r=e.split(" "),i=this,s=null;return r.length>1?t.each(r,function(e){i.on(e,n)}):(s=i._getCallbacks(e),s?s.add(n):(i.addEvents(e),i.on(e,n))),i},off:function(e,t){if(!e&&!t)return this.clearListeners(),this;var n=this,r=n._getCallbacks(e);return r&&r.remove(t),n},publish:function(e,n){var r=this,i=r._bubblesEvents;if(n.bubbles)t.Array.indexOf(e,i)===-1&&i.push(e);else{var s=t.Array.indexOf(e,i);s!==-1&&i.splice(s,1)}}}),i}),define("bui/ua",function(){function e(e){var t=0;return parseFloat(e.replace(/\./g,function(){return t++===0?".":""}))}var t=$.UA||function(){var t=$.browser,n=e(t.version),r={ie:t.msie&&n,webkit:t.webkit&&n,opera:t.opera&&n,mozilla:t.mozilla&&n};return r}();return t}),define("bui/json",["bui/ua"],function(e){function i(e){return e<10?"0"+e:e}function c(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=f[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function h(e,t){var n,r,i,s,o=u,f,p=t[e];p&&typeof p=="object"&&typeof p.toJSON=="function"&&(p=p.toJSON(e)),typeof l=="function"&&(p=l.call(t,e,p));switch(typeof p){case"string":return c(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";u+=a,f=[];if(Object.prototype.toString.apply(p)==="[object Array]"){s=p.length;for(n=0;n<s;n+=1)f[n]=h(n,p)||"null";return i=f.length===0?"[]":u?"[\n"+u+f.join(",\n"+u)+"\n"+o+"]":"["+f.join(",")+"]",u=o,i}if(l&&typeof l=="object"){s=l.length;for(n=0;n<s;n+=1)r=l[n],typeof r=="string"&&(i=h(r,p),i&&f.push(c(r)+(u?": ":":")+i))}else for(r in p)Object.hasOwnProperty.call(p,r)&&(i=h(r,p),i&&f.push(c(r)+(u?": ":":")+i));return i=f.length===0?"{}":u?"{\n"+u+f.join(",\n"+u)+"\n"+o+"}":"{"+f.join(",")+"}",u=o,i}}function p(e){try{return(new Function("return "+e+";"))()}catch(t){throw"Json parse error!"}}var t=window,n=e("bui/ua"),r=t.JSON;if(!r||n.ie<9)r=t.JSON={};typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var s=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u,a,f={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;typeof r.stringify!="function"&&(r.stringify=function(e,t,n){var r;u="",a="";if(typeof n=="number")for(r=0;r<n;r+=1)a+=" ";else typeof n=="string"&&(a=n);l=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return h("",{"":e});throw new Error("JSON.stringify")});var r={parse:$.parseJSON,looseParse:p,stringify:r.stringify};return r}),define("bui/keycode",function(){var e={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};return e}),define("bui/date",function(){function t(e,t){var n=null;t=t||"-";if(n instanceof Date)return n;BUI.isString(e)?n=new Date(e.replace(/-/g,"/")):n=new Date(e);if(n instanceof Date&&n!="Invalid Date"&&!isNaN(n))return n;var r=e.toString().split(t);if(r.length==3){n=new Date(r[0],parseInt(r[1],10)-1,r[2]);if(n instanceof Date&&n!="Invalid Date"&&!isNaN(n))return n}return null}function n(e,t,n){var r=new Date(n);isNaN(r)&&(r=new Date);switch(e){case"s":r=new Date(r.getTime()+1e3*parseInt(t));break;case"n":r=new Date(r.getTime()+6e4*parseInt(t));break;case"h":r=new Date(r.getTime()+36e5*parseInt(t));break;case"d":r=new Date(r.getTime()+864e5*parseInt(t));break;case"w":r=new Date(r.getTime()+6048e5*parseInt(t));break;case"m":r=new Date(r.getFullYear(),r.getMonth()+parseInt(t),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds());break;case"y":r=new Date(r.getFullYear()+parseInt(t),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds())}return r}var e=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,r=function(){var e=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,r=function(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e},i={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},s={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(o,u,a){arguments.length===1&&Object.prototype.toString.call(o)==="[object String]"&&!/\d/.test(o)&&(u=o,o=undefined),o=o?new Date(o):new Date;if(isNaN(o))throw SyntaxError("invalid date");u=String(i[u]||u||i["default"]),u.slice(0,4)==="UTC:"&&(u=u.slice(4),a=!0);var f=a?"getUTC":"get",l=o[f+"Date"](),c=o[f+"Day"](),h=o[f+"Month"](),p=o[f+"FullYear"](),d=o[f+"Hours"](),v=o[f+"Minutes"](),m=o[f+"Seconds"](),g=o[f+"Milliseconds"](),y=a?0:o.getTimezoneOffset(),b={d:l,dd:r(l,undefined),ddd:s.dayNames[c],dddd:s.dayNames[c+7],w:s.dayNames[c+14],m:h+1,mm:r(h+1,undefined),mmm:s.monthNames[h],mmmm:s.monthNames[h+12],yy:String(p).slice(2),yyyy:p,h:d%12||12,hh:r(d%12||12,undefined),H:d,HH:r(d,undefined),M:v,MM:r(v,undefined),s:m,ss:r(m,undefined),l:r(g,3),L:r(g>99?Math.round(g/10):g,undefined),t:d<12?"a":"p",tt:d<12?"am":"pm",T:d<12?"A":"P",TT:d<12?"AM":"PM",Z:a?"UTC":(String(o).match(t)||[""]).pop().replace(n,""),o:(y>0?"-":"+")+r(Math.floor(Math.abs(y)/60)*100+Math.abs(y)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!==10)*l%10]};return u.replace(e,function(e){return e in b?b[e]:e.slice(1,e.length-1)})}}(),i={add:function(e,t,r){return n(e,t,r)},addHour:function(e,t){return n("h",e,t)},addMinute:function(e,t){return n("n",e,t)},addSecond:function(e,t){return n("s",e,t)},addDay:function(e,t){return n("d",e,t)},addWeek:function(e,t){return n("w",e,t)},addMonths:function(e,t){return n("m",e,t)},addYear:function(e,t){return n("y",e,t)},isDateEquals:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},isEquals:function(e,t){return e==t?!0:!e||!t?!1:!e.getTime||!t.getTime?!1:e.getTime()==t.getTime()},isDateString:function(t){return e.test(t)},format:function(e,t,n){return r(e,t,n)},parse:function(e,n){return t(e,n)},today:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},getDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}};return i}),define("bui/base",["bui/observable"],function(e){function r(e,t,n){var r=e[t]||{};return n&&(e[t]=r),r}function i(e,t){return BUI.isString(t)?e[t]:t}function s(e,t,n,r,i){var s=n;return e.fire(t+BUI.ucfirst(n)+"Change",{attrName:s,prevVal:r,newVal:i})}function o(e,t,n,r,i){r=r||{};var o,u,a;return a=e.get(t),!$.isPlainObject(n)&&!BUI.isArray(n)&&a===n?undefined:!r.silent&&!1===s(e,"before",t,a,n)?!1:(o=e._set(t,n,r),o===!1?o:(r.silent||(n=e.getAttrVals()[t],s(e,"after",t,a,n)),e))}var t={},n=e("bui/observable"),u=function(e){var t=this,r=t.constructor,i=[];n.apply(this,arguments);while(r)i.push(r),r=r.superclass?r.superclass.constructor:null;for(var s=i.length-1;s>=0;s--)t.addAttrs(i[s].ATTRS,!0);t._initAttrs(e)};return u.INVALID=t,BUI.extend(u,n),BUI.augment(u,{addAttr:function(e,t,n){var r=this,i=r.getAttrs(),s=BUI.cloneObject(t);return i[e]?n&&BUI.mix(!0,i[e],s):i[e]=s,r},addAttrs:function(e,t,n){var r=this;return e?(typeof t=="boolean"&&(n=t,t=null),BUI.each(e,function(e,t){r.addAttr(t,e,n)}),t&&r.set(t),r):r},hasAttr:function(e){return e&&this.getAttrs().hasOwnProperty(e)},getAttrs:function(){return r(this,"__attrs",!0)},getAttrVals:function(){return r(this,"__attrVals",!0)},get:function(e){var t=this,n=t.hasAttr(e),s=t.getAttrVals(),o,u,a;return o=r(t.getAttrs(),e),u=o.getter,a=e in s?s[e]:t._getDefAttrVal(e),u&&(u=i(t,u))&&(a=u.call(t,a,e)),a},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(e){var t=this;return t.hasAttr(e)&&(delete t.getAttrs()[e],delete t.getAttrVals()[e]),t},set:function(e,t,n){var r=this;if($.isPlainObject(e)){n=t;var i=Object(e),s=[];for(e in i)i.hasOwnProperty(e)&&o(r,e,i[e],n);return r}return o(r,e,t,n)},setInternal:function(e,t,n){return this._set(e,t,n)},_getDefAttrVal:function(e){var t=this,n=t.getAttrs(),s=r(n,e),o=s.valueFn,u;return o&&(o=i(t,o))&&(u=o.call(t),u!==undefined&&(s.value=u),delete s.valueFn,n[e]=s),s.value},_set:function(e,n,s){var o=this,u,a=r(o.getAttrs(),e,!0),f=a.setter;f&&(f=i(o,f))&&(u=f.call(o,n,e));if(u===t)return!1;u!==undefined&&(n=u),o.getAttrVals()[e]=n},_initAttrs:function(e){var t=this;if(e)for(var n in e)e.hasOwnProperty(n)&&t._set(n,e[n])}}),u}),define("bui/component",["bui/component/manage","bui/component/uibase","bui/component/view","bui/component/controller"],function(e){function n(e,n){var r,i;return e&&(i=e.xclass)&&(n&&!e.prefixCls&&(e.prefixCls=n.get("prefixCls")),r=t.Manager.getConstructorByXClass(i),r||BUI.error("can not find class by xclass desc : "+i),e=new r(e)),e}var t={};return BUI.mix(t,{Manager:e("bui/component/manage"),UIBase:e("bui/component/uibase"),View:e("bui/component/view"),Controller:e("bui/component/controller")}),t.create=n,t}),define("bui/component/manage",function(e){function n(e){var n=e.split(/\s+/),r=-1,i,s=null;for(var o=0;o<n.length;o++){var u=t[n[o]];u&&(i=u.priority)>r&&(r=i,s=u.constructor)}return s}function r(e){for(var n in t){var r=t[n];if(r.constructor==e)return n}return 0}function i(e,n){BUI.isFunction(n)?t[e]={constructor:n,priority:0}:(n.priority=n.priority||0,t[e]=n)}function s(e){var t=$.trim(e).split(/\s+/);for(var n=0;n<t.length;n++)t[n]&&(t[n]=this.get("prefixCls")+t[n]);return t.join(" ")}var t={},o={},u={__instances:o,addComponent:function(e,t){o[e]=t},removeComponent:function(e){delete o[e]},getComponent:function(e){return o[e]},getCssClassWithPrefix:s,getXClassByConstructor:r,getConstructorByXClass:n,setConstructorByXClass:i};return u}),function(){var e="bui/component/uibase/";define("bui/component/uibase",[e+"base",e+"align",e+"autoshow",e+"autohide",e+"close",e+"collapseable",e+"drag",e+"keynav",e+"list",e+"listitem",e+"mask",e+"position",e+"selection",e+"stdmod",e+"decorate",e+"tpl",e+"childcfg",e+"bindable",e+"depends"],function(t){var n=t(e+"base");return BUI.mix(n,{Align:t(e+"align"),AutoShow:t(e+"autoshow"),AutoHide:t(e+"autohide"),Close:t(e+"close"),Collapseable:t(e+"collapseable"),Drag:t(e+"drag"),KeyNav:t(e+"keynav"),List:t(e+"list"),ListItem:t(e+"listitem"),Mask:t(e+"mask"),Position:t(e+"position"),Selection:t(e+"selection"),StdMod:t(e+"stdmod"),Decorate:t(e+"decorate"),Tpl:t(e+"tpl"),ChildCfg:t(e+"childcfg"),Bindable:t(e+"bindable"),Depends:t(e+"depends")}),BUI.mix(n,{CloseView:n.Close.View,CollapseableView:n.Collapseable.View,ChildList:n.List.ChildList,ListItemView:n.ListItem.View,MaskView:n.Mask.View,PositionView:n.Position.View,StdModView:n.StdMod.View,TplView:n.Tpl.View}),n})}(),define("bui/component/uibase/base",["bui/component/manage"],function(e){function u(e,t){a(e,"initializer","constructor")}function a(e,t,n){var r=e.constructor,i=[],s,o,u,a;while(r){a=[];if(u=r.mixins)for(var f=0;f<u.length;f++)s=u[f],s&&(n!="constructor"&&(s.prototype.hasOwnProperty(n)?s=s.prototype[n]:s=null),s&&a.push(s));r.prototype.hasOwnProperty(t)&&(o=r.prototype[t])&&a.push(o),a.length&&i.push.apply(i,a.reverse()),r=r.superclass&&
r.superclass.constructor}for(f=i.length-1;f>=0;f--)i[f]&&i[f].call(e)}function f(e){var t=e.constructor,n,r,i;while(t){t.prototype.hasOwnProperty("destructor")&&t.prototype.destructor.apply(e);if(n=t.mixins)for(i=n.length-1;i>=0;i--)r=n[i]&&n[i].prototype.__destructor,r&&r.apply(e);t=t.superclass&&t.superclass.constructor}}function l(e){if(!e)return;BUI.each(e,function(t,n){BUI.isFunction(t)&&(e[n]=new t)})}function c(e,t,n){if(!t)return;BUI.each(t,function(t,r){t[n]&&t[n](e)})}function h(e){var t=e.getAttrs(),r,s;for(r in t)t.hasOwnProperty(r)&&(s=n+i(r),e[s]&&function(t,n){e.on("after"+i(t)+"Change",function(t){t.target===e&&e[n](t.newVal,t)})}(r,s))}function p(e){var t,r,s=e.getAttrs();for(var o in s)if(s.hasOwnProperty(o)){var u=n+i(o);(r=e[u])&&s[o].sync!==!1&&(t=e.get(o))!==undefined&&r.call(e,t)}}var t=e("bui/component/manage"),n="_uiSet",r="ATTRS",i=BUI.ucfirst,s=$.noop,o=e("bui/base"),d=function(e){var t=this,n;o.apply(t,arguments),t.setInternal("userConfig",e),u(t,e);var r,i,s=t.get("plugins"),a=t.get("listeners");l(s);var f=t.get("xclass");f&&(t.__xclass=f),c(t,s,"initializer"),e&&e.autoRender&&t.render()};return d.ATTRS={userConfig:{},autoRender:{value:!1},listeners:{value:{}},plugins:{value:[]},rendered:{value:!1},xclass:{valueFn:function(){return t.getXClassByConstructor(this.constructor)}}},BUI.extend(d,o),BUI.augment(d,{create:function(){var e=this;return e.get("created")||(e.fire("beforeCreateDom"),a(e,"createDom","__createDom"),e._set("created",!0),e.fire("afterCreateDom"),c(e,e.get("plugins"),"createDom")),e},render:function(){var e=this;if(!e.get("rendered")){var t=e.get("plugins");e.create(undefined),e.fire("beforeRenderUI"),a(e,"renderUI","__renderUI"),e.fire("afterRenderUI"),c(e,t,"renderUI"),e.fire("beforeBindUI"),h(e),a(e,"bindUI","__bindUI"),e.fire("afterBindUI"),c(e,t,"bindUI"),e.fire("beforeSyncUI"),p(e),a(e,"syncUI","__syncUI"),e.fire("afterSyncUI"),c(e,t,"syncUI"),e._set("rendered",!0)}return e},createDom:s,renderUI:s,bindUI:s,syncUI:s,destroy:function(){var e=this;return e.fire("beforeDestroy"),c(e,e.get("plugins"),"destructor"),f(e),e.fire("afterDestroy"),e.off(),e.clearAttrVals(),e.destroyed=!0,e}}),BUI.mix(d,{define:function(e,t,n,r){function i(){d.apply(this,arguments)}return $.isPlainObject(t)&&(r=n,n=t,t=[]),BUI.extend(i,e,n,r),BUI.mixin(i,t),i},extend:function v(e,n,r){var i=$.makeArray(arguments),s,o=i[i.length-1];i.unshift(this),o.xclass&&(i.pop(),i.push(o.xclass)),s=d.define.apply(d,i);if(o.xclass){var u=o.priority||(this.priority?this.priority+1:1);t.setConstructorByXClass(o.xclass,{constructor:s,priority:u}),s.__xclass=o.xclass,s.priority=u,s.toString=function(){return o.xclass}}return s.extend=v,s}}),d}),define("bui/component/uibase/align",["bui/ua"],function(e){function i(e){var t=e.ownerDocument,n=t.body,r,i=$(e).css("position"),s=i=="fixed"||i=="absolute";if(!s)return e.nodeName.toLowerCase()=="html"?null:e.parentNode;for(r=e.parentNode;r&&r!=n;r=r.parentNode){i=$(r).css("position");if(i!="static")return r}return null}function s(e){var n={left:0,right:Infinity,top:0,bottom:Infinity},s,o,u,a,f=e.ownerDocument,l=f.body,c=f.documentElement;for(s=e;s=i(s);)if((!t.ie||s.clientWidth!=0)&&s!=l&&s!=c&&$(s).css("overflow")!="visible"){var h=$(s).offset();h.left+=s.clientLeft,h.top+=s.clientTop,n.top=Math.max(n.top,h.top),n.right=Math.min(n.right,h.left+s.clientWidth),n.bottom=Math.min(n.bottom,h.top+s.clientHeight),n.left=Math.max(n.left,h.left)}return o=$(r).scrollLeft(),u=$(r).scrollTop(),n.left=Math.max(n.left,o),n.top=Math.max(n.top,u),a={width:BUI.viewportWidth(),height:BUI.viewportHeight()},n.right=Math.min(n.right,o+a.width),n.bottom=Math.min(n.bottom,u+a.height),n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function o(e,t,n,r){var i,s,o,u;return i={left:e.left,top:e.top},o=d(t,n[0]),u=d(e,n[1]),s=[u.left-o.left,u.top-o.top],{left:i.left-s[0]+ +r[0],top:i.top-s[1]+ +r[1]}}function u(e,t,n){return e.left<n.left||e.left+t.width>n.right}function a(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function f(e,t,n,r){var i=BUI.cloneObject(e),s={width:t.width,height:t.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+s.width>n.right&&(s.width-=i.left+s.width-n.right),r.adjustX&&i.left+s.width>n.right&&(i.left=Math.max(n.right-s.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+s.height>n.bottom&&(s.height-=i.top+s.height-n.bottom),r.adjustY&&i.top+s.height>n.bottom&&(i.top=Math.max(n.bottom-s.height,n.top)),BUI.mix(i,s)}function l(e,t,n){var r=[];return $.each(e,function(e,i){r.push(i.replace(t,function(e){return n[e]}))}),r}function c(e,t){return e[t]=-e[t],e}function h(){}function p(e){var t,n,r;return e.length&&!$.isWindow(e[0])?(t=e.offset(),n=e.outerWidth(),r=e.outerHeight()):(t={left:BUI.scrollLeft(),top:BUI.scrollTop()},n=BUI.viewportWidth(),r=BUI.viewportHeight()),t.width=n,t.height=r,t}function d(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.width,s=e.height,o,u;return o=e.left,u=e.top,n==="c"?u+=s/2:n==="b"&&(u+=s),r==="c"?o+=i/2:r==="r"&&(o+=i),{left:o,top:u}}function v(e){var t=e.attr("class"),r=new RegExp("s?"+n+"[a-z]{2}-[a-z]{2}","ig"),i=r.exec(t);i&&e.removeClass(i.join(" "))}var t=e("bui/ua"),n="x-align-",r=window;return h.__getOffsetParent=i,h.__getVisibleRectForElement=s,h.ATTRS={align:{value:{}}},h.prototype={_uiSetAlign:function(e,t){var r="",i,s;e&&e.points&&(this.align(e.node,e.points,e.offset,e.overflow),this.set("cachePosition",null),i=this.get("el"),v(i),s=e.points.join("-"),r=n+s,i.addClass(r))},align:function(e,t,n,i){e=$(e||r),n=n&&[].concat(n)||[0,0],i=i||{};var h=this,d=h.get("el"),v=0,m=s(d[0]),g=p(d),y=p(e),b=o(g,y,t,n),w=BUI.merge(g,b);if(m&&(i.adjustX||i.adjustY)){u(b,g,m)&&(v=1,t=l(t,/[lr]/ig,{l:"r",r:"l"}),n=c(n,0)),a(b,g,m)&&(v=1,t=l(t,/[tb]/ig,{t:"b",b:"t"}),n=c(n,1)),v&&(b=o(g,y,t,n),BUI.mix(w,b));var E={};E.adjustX=i.adjustX&&u(b,g,m),E.adjustY=i.adjustY&&a(b,g,m);if(E.adjustX||E.adjustY)w=f(b,g,m,E)}return w.left!=g.left&&(h.setInternal("x",null),h.get("view").setInternal("x",null),h.set("x",w.left)),w.top!=g.top&&(h.setInternal("y",null),h.get("view").setInternal("y",null),h.set("y",w.top)),w.width!=g.width&&d.width(d.width()+w.width-g.width),w.height!=g.height&&d.height(d.height()+w.height-g.height),h},center:function(e){var t=this;return t.set("align",{node:e,points:["cc","cc"],offset:[0,0]}),t}},h}),define("bui/component/uibase/autoshow",function(){function e(){}return e.ATTRS={trigger:{},delegateTigger:{value:!1},autoAlign:{value:!0},curTrigger:{},triggerCallback:{value:function(e){}},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{triggerchange:!1}}},e.prototype={__createDom:function(){this._setTrigger()},_setTrigger:function(){function u(t){var n=e.get("curTrigger"),i=s?$(t.currentTarget):$(this),o=e.get("align");if(!n||n[0]!=i[0])e.set("curTrigger",i),e.fire("triggerchange",{prevTrigger:n,curTrigger:i});e.get("autoAlign")&&(o.node=i),e.set("align",o),e.show(),r&&r(t)}function a(t){var n=t.toElement||t.relatedTarget;(!n||!e.containsElement(n))&&e.hide()}var e=this,t=e.get("triggerEvent"),n=e.get("triggerHideEvent"),r=e.get("triggerCallback"),i=e.get("trigger"),s=e.get("delegateTigger"),o=$(i);t&&(s&&BUI.isString(i)?$(document).delegate(i,t,u):o.on(t,u)),n&&(s&&BUI.isString(i)?$(document).delegate(i,n,a):o.on(n,a))},__renderUI:function(){var e=this,t=e.get("align");t&&!t.node&&(t.node=e.get("render")||e.get("trigger"))}},e}),define("bui/component/uibase/autohide",function(){function n(e,t){var n=e.get("hideExceptNode");return n&&n.length?$.contains(n[0],t):!1}function r(){}var e=BUI.wrapBehavior,t=BUI.getWrapBehavior;return r.ATTRS={autoHideType:{value:"click"},autoHide:{value:!1},hideExceptNode:{},events:{value:{autohide:!1}}},r.prototype={__bindUI:function(){var e=this;e.on("afterVisibleChange",function(t){var n=t.newVal;e.get("autoHide")&&(n?e._bindHideEvent():e._clearHideEvent())})},handleMoveOuter:function(e){var t=this,r=e.toElement||e.relatedTarget;!t.containsElement(r)&&!n(t,r)&&t.fire("autohide")!==!1&&t.hide()},handleDocumentClick:function(e){var t=this,r=e.target;!t.containsElement(r)&&!n(t,r)&&t.fire("autohide")!==!1&&t.hide()},_bindHideEvent:function(){var t=this,n=t.get("curTrigger"),r=t.get("autoHideType");r==="click"?$(document).on("mousedown",e(t,"handleDocumentClick")):(t.get("el").on("mouseleave",e(t,"handleMoveOuter")),n&&$(n).on("mouseleave",e(t,"handleMoveOuter")))},_clearHideEvent:function(){var e=this,n=e.get("curTrigger"),r=e.get("autoHideType");r==="click"?$(document).off("mousedown",t(e,"handleDocumentClick")):(e.get("el").off("mouseleave",t(e,"handleMoveOuter")),n&&$(n).off("mouseleave",t(e,"handleMoveOuter")))}},r}),define("bui/component/uibase/close",function(){function t(e){return $(e.get("closeTpl"))}function n(){}function r(){}var e=BUI.prefix+"ext-";n.ATTRS={closeTpl:{value:'<a tabindex="0" href=\'javascript:void("\u5173\u95ed")\' role="button" class="'+e+"close"+'">'+'<span class="'+e+"close-x"+'">\u5173\u95ed<'+"/span>"+"<"+"/a>"},closable:{value:!0},closeBtn:{}},n.prototype={_uiSetClosable:function(e){var n=this,r=n.get("closeBtn");e?(r||n.setInternal("closeBtn",r=t(n)),r.appendTo(n.get("el"),undefined)):r&&r.remove()}};var i="hide";r.ATTRS={closeTpl:{view:!0},closable:{view:1},closeBtn:{view:1},closeAction:{value:i}};var s={hide:i,destroy:"destroy"};return r.prototype={_uiSetClosable:function(e){var t=this;e&&!t.__bindCloseEvent&&(t.__bindCloseEvent=1,t.get("closeBtn").on("click",function(e){t.fire("closeclick",{domTarget:e.target})!==!1&&t.close(),e.preventDefault()}))},__destructor:function(){var e=this.get("closeBtn");e&&e.detach()},close:function(){var e=this,t=s[e.get("closeAction")||i];e.fire("closing",{action:t})!==!1&&(e[t](),e.fire("closed",{action:t}))}},r.View=n,r}),define("bui/component/uibase/drag",function(){function r(){var e=$(n).css("opacity",0).prependTo("body");return e}var e=BUI.guid("drag"),t=function(){};t.ATTRS={dragNode:{},draging:{setter:function(e){if(e===!0)return{}},value:null},constraint:{},dragBackEl:{getter:function(){return $("#"+e)}}};var n='<div id="'+e+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';return t.prototype={__bindUI:function(){function r(n){var r=e.get("draging");r&&(n.preventDefault(),e._dragMoveTo(n.pageX,n.pageY,r,t))}function i(t){if(t.which==1){e.set("draging",!1);var n=e.get("dragBackEl");n&&n.hide(),o()}}function s(){$(document).on("mousemove",r),$(document).on("mouseup",i)}function o(){$(document).off("mousemove",r),$(document).off("mouseup",i)}var e=this,t=e.get("constraint"),n=e.get("dragNode");if(!n)return;n.on("mousedown",function(t){t.which==1&&(t.preventDefault(),e.set("draging",{elX:e.get("x"),elY:e.get("y"),startX:t.pageX,startY:t.pageY}),s())})},_dragMoveTo:function(e,t,n,i){var s=this,o=s.get("dragBackEl"),n=n||s.get("draging"),u=n.startX-e,a=n.startY-t;o.length||(o=r()),o.css({cursor:"move",display:"block"}),s.set("xy",[s._getConstrainX(n.elX-u,i),s._getConstrainY(n.elY-a,i)])},_getConstrainX:function(e,t){var n=this,r=n.get("el").outerWidth(),i=e+r,s=n.get("x");if(t){var o=t.offset();return o.left>=e?o.left:o.left+t.width()<i?o.left+t.width()-r:e}return BUI.isInHorizontalView(e)&&BUI.isInHorizontalView(i)?e:s},_getConstrainY:function(e,t){var n=this,r=n.get("el").outerHeight(),i=e+r,s=n.get("y");if(t){var o=t.offset();return o.top>e?o.top:o.top+t.height()<i?o.top+t.height()-r:e}return BUI.isInVerticalView(e)&&BUI.isInVerticalView(i)?e:s}},t}),define("bui/component/uibase/keynav",["bui/keycode"],function(e){var t=e("bui/keycode"),n=BUI.wrapBehavior,r=BUI.getWrapBehavior,i=function(){};return i.ATTRS={allowKeyNav:{value:!0},navEvent:{value:"keydown"},ignoreInputFields:{value:!0}},i.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(e){var t=this,i=t.get("navEvent"),s=t.get("el");e?s.on(i,n(t,"_handleKeyDown")):s.off(i,r(t,"_handleKeyDown"))},_handleKeyDown:function(e){var n=this,r=e.which;switch(r){case t.UP:n.handleNavUp(e);break;case t.DOWN:n.handleNavDown(e);break;case t.RIGHT:n.handleNavRight(e);break;case t.LEFT:n.handleNavLeft(e);break;case t.ENTER:n.handleNavEnter(e);break;case t.ESC:n.handleNavEsc(e);break;case t.TAB:n.handleNavTab(e);break;default:}},handleNavUp:function(e){},handleNavDown:function(e){},handleNavLeft:function(e){},handleNavRight:function(e){},handleNavEnter:function(e){},handleNavEsc:function(e){},handleNavTab:function(e){}},i}),define("bui/component/uibase/mask",function(e){function i(e){return e.get("prefixCls")+"ext-mask"}function s(){return r?BUI.docWidth()+"px":"100%"}function o(){return r?BUI.docHeight()+"px":"100%"}function u(e){var t=$('<div  style="width:'+s()+";"+"left:0;"+"top:0;"+"height:"+o()+";"+"position:"+(r?"absolute":"fixed")+';"'+' class="'+e+'">'+(r?'<iframe style="position:absolute;left:0;top:0;background:white;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");return t.on("mousedown",function(e){e.preventDefault()}),t}function a(){}function f(){}var t=e("bui/ua"),n={},r=t.ie==6;return a.ATTRS={maskShared:{value:!0}},a.prototype={_maskExtShow:function(){var e=this,t,r=i(e),s=n[r],o=e.get("maskShared"),a=e.get("maskNode");a||(o?s?a=s.node:(a=u(r),s=n[r]={num:0,node:a}):a=u(r),e.setInternal("maskNode",a)),(t=e.get("zIndex"))&&a.css("z-index",t-1),o&&s.num++,(!o||s.num==1)&&a.show()},_maskExtHide:function(){var e=this,t=i(e),r=n[t],s=e.get("maskShared"),o=e.get("maskNode");s&&r?(r.num=Math.max(r.num-1,0),r.num==0&&o.hide()):o&&o.hide()},__destructor:function(){var e=this,t=e.get("maskShared"),n=e.get("maskNode");e.get("maskNode")&&(t?e.get("visible")&&e._maskExtHide():n.remove())}},f.ATTRS={mask:{value:!1},maskNode:{view:1},maskShared:{view:1}},f.prototype={__bindUI:function(){var e=this,t=e.get("view"),n=t._maskExtShow,r=t._maskExtHide;e.get("mask")&&(e.on("show",function(){t._maskExtShow()}),e.on("hide",function(){t._maskExtHide()}))}},f=f,f.View=a,f}),define("bui/component/uibase/position",function(){function e(){}function t(){}return e.ATTRS={x:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().left}},y:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}},e.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(e){this.get("el").css("z-index",e)},_uiSetX:function(e){e!=null&&this.get("el").offset({left:e})},_uiSetY:function(e){e!=null&&this.get("el").offset({top:e})},_uiSetLeft:function(e){e!=null&&this.get("el").css({left:e})},_uiSetTop:function(e){e!=null&&this.get("el").css({top:e})}},t.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(e){var t=this,n=$.makeArray(e);return n.length&&(n[0]&&t.set("x",n[0]),n[1]&&t.set("y",n[1])),e},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:!0,value:!0}},t.prototype={move:function(e,t){var n=this;return BUI.isArray(e)&&(t=e[1],e=e[0]),n.set("xy",[e,t]),n},_uiSetX:function(e){if(e!=null){var t=this,n=t.get("el");t.setInternal("left",n.position().left),e!=-999&&this.set("cachePosition",null)}},_uiSetY:function(e){if(e!=null){var t=this,n=t.get("el");t.setInternal("top",n.position().top),e!=-999&&this.set("cachePosition",null)}},_uiSetLeft:function(e){var t=this,n=t.get("el");e!=null&&t.setInternal("x",n.offset().left)},_uiSetTop:function(e){var t=this,n=t.get("el");e!=null&&t.setInternal("y",n.offset().top)}},t.View=e,t}),define("bui/component/uibase/listitem",function(){function e(){}function t(){}return e.ATTRS={selected:{}},e.prototype={_uiSetSelected:function(e){var t=this,n=t.getStatusCls("selected"),r=t.get("el");e?r.addClass(n):r.removeClass(n)}},t.ATTRS={selectable:{value:!0},selected:{view:!0,sync:!1,value:!1}},t.prototype={},t.View=e,t}),define("bui/component/uibase/stdmod",function(){function t(){}function n(t,n){var r=t.get("contentEl"),i=t.get(n);i||(i=$('<div class="'+e+n+'"'+" "+" >"+"</div>"),i.appendTo(r),t.setInternal(n,i))}function r(e,t,n){t=e.get(t),BUI.isString(n)?t.html(n):t.html("").append(n)}function i(){}var e=BUI.prefix+"stdmod-";return t.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}},t.PARSER={header:function(t){return t.one("."+e+"header")},body:function(t){return t.one("."+e+"body")},footer:function(t){return t.one("."+e+"footer")}},t.prototype={__createDom:function(){n(this,"header"),n(this,"body"),n(this,"footer")},_uiSetBodyStyle:function(e){this.get("body").css(e)},_uiSetHeaderStyle:function(e){this.get("header").css(e)},_uiSetFooterStyle:function(e){this.get("footer").css(e)},_uiSetBodyContent:function(e){r(this,"body",e)},_uiSetHeaderContent:function(e){r(this,"header",e)},_uiSetFooterContent:function(e){r(this,"footer",e)}},i.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}},i.View=t,i}),define("bui/component/uibase/decorate",["bui/array","bui/json","bui/component/manage"],function(e){function s(e,t){if(t[e])return!0;var n=new RegExp("^"+i);return e!==FIELD_CFG&&n.test(e)?!0:!1}function o(e){var t=[],n=e.constructor;while(n)t.push(n),n=n.superclass&&n.superclass.constructor;return t}function u(e){return e=$.trim(e),regx.test(e)&&(e=n.looseParse(e)),e}function a(e,t){var n=e.userConfig||{};for(var r in t)r in n||e.setInternal(r,t[r])}function f(e,t){var n=this,r,i,s=n.userConfig||{};for(r in t)r in s||(i=t[r],BUI.isFunction(i)?n.setInternal(r,i.call(n,e)):typeof i=="string"?n.setInternal(r,e.find(i)):BUI.isArray(i)&&i[0]&&n.setInternal(r,e.find(i[0])))}function l(e,t){var n=e.constructor,r,i,s;s=o(e);for(r=s.length-1;r>=0;r--)n=s[r],(i=n[PARSER])&&f.call(e,t,i)}function c(e){var t=e,n=t.get("srcNode"),r,i;n&&(n=$(n),t.setInternal("el",n),t.setInternal("srcNode",n),r=t.get("userConfig"),i=t.getDecorateConfig(n),a(e,i),t.get("isDecorateChild")&&t.decorateInternal&&t.decorateInternal(n),l(e,n))}function h(){c(this)}var t=e("bui/array"),n=e("bui/json"),r=BUI.prefix,i="data-";return FIELD_CFG=i+"cfg",PARSER="PARSER",Manager=e("bui/component/manage"),regx=/^[\{\[]/,h.ATTRS={srcNode:{view:!0},isDecorateChild:{value:!1},decorateCfgFields:{value:{id:!0,name:!0,value:!0,title:!0}}},h.prototype={getDecorateConfig:function(e){if(!e.length)return null;var t=this,n=e[0],r=n.attributes,o=t.get("decorateCfgFields"),a={};return BUI.each(r,function(e){var t=e.nodeName;try{if(t===FIELD_CFG){var n=u(e.nodeValue);BUI.mix(a,n)}else s(t,o)&&(t=t.replace(i,""),a[t]=u(e.nodeValue))}catch(r){BUI.log("parse field error,the attribute is:"+t)}}),a},getDecorateElments:function(){var e=this,t=e.get("el"),n=e.get("contentContainer");return n?t.find(n).children():t.children()},decorateInternal:function(e){var t=this;t.decorateChildren(e)},findXClassByNode:function(e,t){var n=this,i=e.attr("class")||"",s=n.get("defaultChildClass");i=i.replace(new RegExp("\\b"+r,"ig"),"");var o=Manager.getConstructorByXClass(i)||Manager.getConstructorByXClass(s);return!o&&!t&&(BUI.log(e),BUI.error("can not find ui "+i+" from this markup")),Manager.getXClassByConstructor(o)},decorateChildrenInternal:function(e,t){var n=this,r=n.get("children");r.push({xclass:e,srcNode:t})},decorateChildren:function(e){var t=this,n=t.getDecorateElments();BUI.each(n,function(e){var n=t.findXClassByNode($(e));t.decorateChildrenInternal(n,$(e))})}},h}),define("bui/component/uibase/tpl",function(){function e(){}function t(){}return e.ATTRS={tpl:{}},e.prototype={__renderUI:function(){var e=this,t=e.get("childContainer"),n;t&&(n=e.get("el").find(t),n.length&&e.set("contentEl",n))},getTpl:function(e){var t=this,n=t.get("tpl"),r=t.get("tplRender");return e=e||t.getAttrVals(),r?r(e):n?BUI.substitute(n,e):""},setTplContent:function(e){var t=this,n=t.get("el"),r=t.get("content"),i=t.getTpl(e);!r&&i&&(n.empty(),n.html(i))}},t.ATTRS={tpl:{view:!0,sync:!1},tplRender:{view:!0,value:null},childContainer:{view:!0}},t.prototype={__renderUI:function(){this.get("srcNode")||this.setTplContent()},setTplContent:function(){var e=this,t=e.getAttrVals();e.get("view").setTplContent(t)},_uiSetTpl:function(){this.setTplContent()}},t.View=e,t}),define("bui/component/uibase/collapseable",function(){var e=function(){};e.ATTRS={collapsed:{}},e.prototype={_uiSetCollapsed:function(e){var t=this,n=t.getStatusCls("collapsed"),r=t.get("el");e?r.addClass(n):r.removeClass(n)}};var t=function(){};return t.ATTRS={collapseable:{value:!1},collapsed:{view:!0,value:!1},events:{value:{expanded:!0,collapsed:!0}}},t.prototype={_uiSetCollapsed:function(e){var t=this;e?t.fire("collapsed"):t.fire("expanded")}},t.View=e,t}),define("bui/component/uibase/selection",function(){var e="single",t=function(){};return t.ATTRS={selectedEvent:{value:"click"},events:{value:{selectedchange:!1,beforeselectedchange:!1,itemselected:!1,itemunselected:!1}},idField:{value:"id"},multipleSelect:{value:!1}},t.prototype={clearSelection:function(){var e=this,t=e.getSelection();BUI.each(t,function(t){e.clearSelected(t)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var e=this,t=e.get("idField"),n=e.getSelected();return e.getValueByField(n,t)},getSelectionValues:function(){var e=this,t=e.get("idField"),n=e.getSelection();return $.map(n,function(n){return e.getValueByField(n,t)})},getSelectionText:function(){var e=this,t=e.getSelection();return $.map(t,function(t){return e.getItemText(t)})},clearSelected:function(e){var t=this;e=e||t.getSelected(),e&&t.setItemSelected(e,!1)},getSelectedText:function(){var e=this,t=e.getSelected();return e.getItemText(t)},setSelection:function(e){var t=this;e=BUI.isArray(e)?e:[e],BUI.each(e,function(e){t.setSelected(e)})},setSelected:function(e){var t=this,n=t.get("multipleSelect");if(!n){var r=t.getSelected();e!=r&&t.clearSelected(r)}t.setItemSelected(e,!0)},isItemSelected:function(e){},setItemSelected:function(e,t){var n=this,r;if(e){r=n.isItemSelected(e);if(r==t)return}n.fire("beforeselectedchange")!==!1&&n.setItemSelectedStatus(e,t)},setItemSelectedStatus:function(e,t){},setAllSelection:function(){},setSelectedByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this,r=n.findItemByField(e,t);n.setSelected(r)},setSelectionByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this;BUI.each(t,function(t){n.setSelectedByField(e,t)})},afterSelected:function(e,t,n){var r=this;t?(r.fire("itemselected",{item:e,domTarget:n}),r.fire("selectedchange",{item:e,domTarget:n,selected:t})):(r.fire("itemunselected",{item:e,domTarget:n}),r.get("multipleSelect")&&r.fire("selectedchange",{item:e,domTarget:n,selected:t}))}},t}),define("bui/component/uibase/list",["bui/component/uibase/selection"],function(e){function r(e){e.selected&&(e.selected=!1),e.set&&e.set("selected",!1)}function i(e,t){var n=t.isController?t.getAttrVals():t,r=e.get("itemTpl"),i=e.get("itemStatusCls"),o=e.get("itemTplRender");r&&!n.tpl&&s(t,"tpl",r),o&&!n.tplRender&&s(t,"tplRender",o);if(i){var u=n.statusCls||t.isController?t.get("statusCls"):{};BUI.each(i,function(e,t){e&&!u[t]&&(u[t]=e)}),s(t,"statusCls",u)}}function s(e,t,n){e.isController?e.set(t,n):e[t]=n}var t=e("bui/component/uibase/selection"),n=function(){};n.ATTRS={items:{view:!0},idField:{value:"id"},itemTpl:{view:!0},itemTplRender:{view:!0},itemStatusCls:{view:!0,value:{}},events:{value:{itemclick:!0}}},n.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(e,t){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(e){return this.getItems()[e]||null},getItem:function(e){var t=this.get("idField");return this.findItemByField(t,e)},indexOfItem:function(e){return BUI.Array.indexOf(e,this.getItems())},addItems:function(e){var t=this;BUI.each(e,function(e){t.addItem(e)})},addItemsAt:function(e,t){var n=this;BUI.each(e,function(e,r){n.addItemAt(e,t+r)})},updateItem:function(e){},addItem:function(e){return this.addItemAt(e,this.getItemCount())},addItemAt:function(e,t){},findItemByField:function(e,t){},getItemText:function(e){},clearItems:function(){var e=this,t=e.getItems();t.splice(0),e.clearControl()},removeItem:function(e){},removeItems:function(e){var t=this;BUI.each(e,function(e){t.removeItem(e)})},removeItemAt:function(e){this.removeItem(this.getItemAt(e))},clearControl:function(){}};var o=function(){this.__init()};return o.ATTRS=BUI.merge(!0,n.ATTRS,t.ATTRS,{items:{sync:!1},autoInitItems:{value:!0},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}}),BUI.augment(o,n,t,{__init:function(){var e=this,t=e.get("items");t&&e.get("autoInitItems")&&e.addItems(t),e.on("beforeRenderUI",function(){e._beforeRenderUI()})},_uiSetItems:function(e){var t=this;t.clearControl(),t.addItems(e)},_beforeRenderUI:function(){var e=this,t=e.get("children"),n=e.get("items");BUI.each(t,function(t){i(e,t)})},__bindUI:function(){var e=this,t=e.get("selectedEvent");e.on(t,function(t){var n=t.target;n.get("selectable")&&(n.get("selected")?e.get("multipleSelect")&&e.clearSelected(n):e.setSelected(n))}),e.on("click",function(t){t.target!==e&&e.fire("itemclick",{item:t.target,domTarget:t.domTarget,domEvent:t})}),e.on("beforeAddChild",function(t){i(e,t.child)}),e.on("beforeRemoveChild",function(t){var n=t.child,r=n.get("selected");r&&(e.get("multipleSelect")?e.clearSelected(n):e.setSelected(null)),n.set("selected",!1)})},clearControl:function(){this.removeChildren(!0)},getItems:function(){return this.get("children")},updateItem:function(e){var t=this,n=t.get("idField"),r=t.findItemByField(n,e[n]);return r&&r.setTplContent(),r},removeItem:function(e){var t=this,n=t.get("idField");e instanceof BUI.Component.Controller||(e=t.findItemByField(n,e[n])),this.removeChild(e,!0)},addItemAt:function(e,t){return this.addChild(e,t)},findItemByField:function(e,t,n){n=n||this;var r=this,i=n.get("children"),s=null;return $(i).each(function(n,i){i.get(e)==t?s=i:i.get("children").length&&(s=r.findItemByField(e,t,i));if(s)return!1}),s},getItemText:function(e){return e.get("el").text()},getValueByField:function(e,t){return e&&e.get(t)},setItemSelectedStatus:function(e,t){var n=this,r=t?"addClass":"removeClass",i=null;e&&(e.set("selected",t),i=e.get("el")),n.afterSelected(e,t,i)},isItemSelected:function(e){return e?e.get("selected"):!1},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},getSelection:function(){var e=this,t=e.getItems(),n=[];return BUI.each(t,function(t){e.isItemSelected(t)&&n.push(t)}),n}}),n.ChildList=o,n}),define("bui/component/uibase/childcfg",function(e){var t=function(e){this._init()};return t.ATTRS={defaultChildCfg:{}},t.prototype={_init:function(){var e=this,t=e.get("defaultChildCfg");t&&e.on("beforeAddChild",function(e){var n=e.child;$.isPlainObject(n)&&BUI.each(t,function(e,t){n[t]||(n[t]=e)})})}},t}),define("bui/component/uibase/depends",["bui/component/manage"],function(e){function r(e){var n=t.exec(e),r=n[1],i=n[2],s=o(r);return{source:s,eventType:i}}function i(e,t,n){var i=r(t),s=i.source,o=i.eventType,u;return s&&n&&o&&(BUI.isFunction(n)?u=n:BUI.isArray(n)&&(u=function(){BUI.each(n,function(t){e[t]&&e[t]()})})),u?(i.callbak=u,s.on(o,u),i):null}function s(e){var t=e.source,n=e.eventType,r=e.callbak;t.off(n,r)}function o(e){var t=n.getComponent(e);return t||(t=$("#"+e),t.length||(t=null)),t}function u(){}var t=/^#(.*):(.*)$/,n=e("bui/component/manage");return u.ATTRS={depends:{value:{}},dependencesMap:{value:{}}},u.prototype={__syncUI:function(){this.initDependences()},initDependences:function(){var e=this,t=e.get("depends");BUI.each(t,function(t,n){e.addDependence(n,t)})},addDependence:function(e,t){var n=this,r=n.get("dependencesMap"),s;n.removeDependence(e),s=i(n,e,t),s&&(r[e]=s)},removeDependence:function(e){var t=this,n=t.get("dependencesMap"),r=n[e];r&&(s(r),delete n[e])},clearDependences:function(){var e=this,t=e.get("dependencesMap");BUI.each(t,function(e,t){s(e)}),e.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}},u}),define("bui/component/uibase/bindable",function(){function e(){}return e.ATTRS={store:{},loadMask:{value:!1}},BUI.augment(e,{__bindUI:function(){var e=this,t=e.get("store"),n=e.get("loadMask");if(!t)return;t.on("beforeload",function(t){e.onBeforeLoad(t),n&&n.show&&n.show()}),t.on("load",function(t){e.onLoad(t),n&&n.hide&&n.hide()}),t.on("exception",function(t){e.onException(t),n&&n.hide&&n.hide()}),t.on("add",function(t){e.onAdd(t)}),t.on("remove",function(t){e.onRemove(t)}),t.on("update",function(t){e.onUpdate(t)}),t.on("localsort",function(t){e.onLocalSort(t)})},__syncUI:function(){var e=this,t=e.get("store");if(!t)return;t.hasData()&&e.onLoad()},onBeforeLoad:function(e){},onLoad:function(e){},onException:function(e){},onAdd:function(e){},onRemove:function(e){},onUpdate:function(e){},onLocalSort:function(e){}}),e}),define("bui/component/view",["bui/component/manage","bui/component/uibase"],function(e){var t=window,n=e("bui/component/manage"),r=e("bui/component/uibase"),i=document,s=r.extend([r.TplView],{getComponentCssClassWithState:function(e){var t=this,n=t.get("ksComponentCss");return e=e||"",t.getCssClassWithPrefix(n.split(/\s+/).join(e+" ")+e)},getCssClassWithPrefix:n.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},getStatusCls:function(e){var t=this,n=t.get("statusCls"),r=n[e];return r||(r=t.getComponentCssClassWithState("-"+e)),r},renderUI:function(){var e=this;if(!e.get("srcNode")){var t=e.get("render"),n=e.get("el"),r=e.get("elBefore");r?n.insertBefore(r,undefined):t?n.appendTo(t,undefined):n.appendTo(i.body,undefined)}},createDom:function(){var e=this,t=e.get("contentEl"),n=e.get("el");e.get("srcNode")||(n=$("<"+e.get("elTagName")+">"),t&&n.append(t),e.setInternal("el",n)),n.addClass(e.getComponentCssClassWithState()),t||e.setInternal("contentEl",n)},_uiSetHighlighted:function(e){var t=this,n=t.getStatusCls("hover"),r=t.get("el");r[e?"addClass":"removeClass"](n)},_uiSetDisabled:function(e){var t=this,n=t.getStatusCls("disabled"),r=t.get("el");r[e?"addClass":"removeClass"](n).attr("aria-disabled",e),e&&t.get("highlighted")&&t.set("highlighted",!1),t.get("focusable")&&t.getKeyEventTarget().attr("tabIndex",e?-1:0)},_uiSetActive:function(e){var t=this,n=t.getStatusCls("active");t.get("el")[e?"addClass":"removeClass"](n).attr("aria-pressed",!!e)},_uiSetFocused:function(e){var t=this,n=t.get("el"),r=t.getStatusCls("focused");n[e?"addClass":"removeClass"](r)},_uiSetElAttrs:function(e){this.get("el").attr(e)},_uiSetElCls:function(e){this.get("el").addClass(e)},_uiSetElStyle:function(e){this.get("el").css(e)},_uiSetWidth:function(e){this.get("el").width(e)},_uiSetHeight:function(e){var t=this;t.get("el").height(e)},_uiSetContent:function(e){var t=this,n;if(!t.get("srcNode")||!!t.get("rendered"))n=t.get("contentEl"),typeof e=="string"?n.html(e):e&&n.empty().append(e)},_uiSetVisible:function(e){var t=this,n=t.get("el"),r=t.get("visibleMode");r==="visibility"?n.css("visibility",e?"visible":"hidden"):n.css("display",e?"":"none")},destructor:function(){var e=this.get("el");e&&e.remove()}},{xclass:"view",priority:0});return s.ATTRS={el:{setter:function(e){return $(e)}},elCls:{},elStyle:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:!0},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:!0},focused:{},active:{},disabled:{},highlighted:{}},s}),define("bui/component/loader",["bui/util"],function(e){"use strict";var t=e("bui/util"),n=e("bui/base"),r=function(e){r.superclass.constructor.call(this,e),this._init()};return r.ATTRS={url:{},target:{},hasLoad:{value:!1},autoLoad:{},lazyLoad:{},property:{},renderer:{value:function(e){return e}},loadMask:{value:!1},dataType:{value:"text"},ajaxOptions:{value:{method:"get",cache:!1}},params:{},appendParams:{},lastParams:{value:{}},callback:{},failure:{}},t.extend(r,n),t.augment(r,{isLoader:!0,_init:function(){var e=this,t=e.get("autoLoad"),n=e.get("params");e._initMask(),t?e.load(n):(e._initParams(),e._initLazyLoad())},_initLazyLoad:function(){var e=this,t=e.get("target"),n=e.get("lazyLoad");t&&n&&n.event&&t.on(n.event,function(){(!e.get("hasLoad")||n.repeat)&&e.load()})},_initMask:function(){var e=this,n=e.get("target"),r=e.get("loadMask");n&&r&&t.use("bui/mask",function(i){var s=$.isPlainObject(r)?r:{};r=new i.LoadMask
(t.mix({el:n.get("el")},s)),e.set("loadMask",r)})},_initParams:function(){var e=this,n=e.get("lastParams"),r=e.get("params");t.mix(n,r)},load:function(e){var n=this,r=n.get("url"),i=n.get("ajaxOptions"),s=n.get("lastParams"),o=n.get("appendParams");t.mix(!0,s,o,e),e=t.cloneObject(s);if(!r)return;n.onBeforeLoad(),n.set("hasLoad",!0),$.ajax(t.mix({dataType:n.get("dataType"),data:e,url:r,success:function(t){n.onload(t,e)},error:function(t,r,i){n.onException({jqXHR:t,textStatus:r,errorThrown:i},e)}},i))},onBeforeLoad:function(){var e=this,t=e.get("loadMask");t&&t.show&&t.show()},onload:function(e,t){var n=this,r=n.get("loadMask"),i=n.get("property"),s=n.get("callback"),o=n.get("renderer"),u=n.get("target");u.set(i,o.call(n,e)),r&&r.hide&&r.hide(),s&&s.call(this,e,t)},onException:function(e,t){var n=this,r=n.get("failure");r&&r.call(this,e,t)}}),r}),define("bui/component/controller",["bui/component/uibase","bui/component/manage","bui/component/view","bui/component/loader"],function(e){"use strict";function u(e){return function(t){var n=this;if(n===t.target){var r=t.newVal,i=n.get("view");i&&i.set(e,r)}}}function a(e){return function(t){var n=this,r=n.get("view");return t===undefined?r.get(e):t}}function f(e,t,n){e.create();var r=e.getContentElement(),i=e.get("defaultChildClass");return!t.xclass&&!(t instanceof p)&&(t.xtype?t.xclass=i+"-"+t.xtype:t.xclass=i),t=BUI.Component.create(t,e),t.setInternal("parent",e),t.set("render",r),t.set("elBefore",n),t.create(undefined),t}function l(e){var t,n,r,i={},s,o=e.get("xview");t=e.getAttrs();for(r in t)t.hasOwnProperty(r)&&(n=t[r],n.view&&((s=e.get(r))!==undefined&&(i[r]=s),e.on("after"+BUI.ucfirst(r)+"Change",u(r)),n.getter=a(r)));return delete i.autoRender,i.ksComponentCss=c(e),new o(i)}function c(e){var t=e.constructor,r,i=[];while(t&&t!==p)r=n.getXClassByConstructor(t),r&&i.push(r),t=t.superclass&&t.superclass.constructor;return i.join(" ")}function h(e,t){var n=e.relatedTarget;return n&&(n===t[0]||$.contains(t,n))}var t=e("bui/component/uibase"),n=e("bui/component/manage"),r=e("bui/component/view"),i=e("bui/component/loader"),s=BUI.wrapBehavior,o=BUI.getWrapBehavior,p=t.extend([t.Decorate,t.Tpl,t.ChildCfg,t.KeyNav,t.Depends],{isController:!0,getCssClassWithPrefix:n.getCssClassWithPrefix,initializer:function(){var e=this;e.get("id")||e.set("id",e.getNextUniqueId()),n.addComponent(e.get("id"),e),e.setInternal("view",l(e))},getNextUniqueId:function(){var e=this,t=n.getXClassByConstructor(e.constructor);return BUI.guid(t)},createDom:function(){var e=this,t=e.get("view");t.create(undefined)},renderUI:function(){var e=this,t=e.get("loader");e.get("view").render(),e._initChildren(),t&&e.setInternal("loader",t)},_initChildren:function(e){var t=this,n,e,r;e=e||t.get("children").concat(),t.get("children").length=0;for(n=0;n<e.length;n++)r=t.addChild(e[n]),r.render()},bindUI:function(){var e=this,t=e.get("events");this.on("afterVisibleChange",function(e){this.fire(e.newVal?"show":"hide")}),BUI.each(t,function(t,n){e.publish(n,{bubbles:t})})},containsElement:function(e){var t=this,n=t.get("el"),r=t.get("children"),i=!1;return t.get("rendered")?($.contains(n[0],e)||n[0]===e?i=!0:BUI.each(r,function(t){if(t.containsElement(e))return i=!0,!1}),i):!1},isChildrenElement:function(e){var t=this,n=t.get("children"),r=!1;return BUI.each(n,function(t){if(t.containsElement(e))return r=!0,!1}),r},show:function(){var e=this;return e.render(),e.set("visible",!0),e},hide:function(){var e=this;return e.set("visible",!1),e},toggle:function(){return this.set("visible",!this.get("visible")),this},_uiSetFocusable:function(e){var t=this,n,r=t.getKeyEventTarget();e?r.attr("tabIndex",0).attr("hideFocus",!0).on("focus",s(t,"handleFocus")).on("blur",s(t,"handleBlur")).on("keydown",s(t,"handleKeydown")).on("keyup",s(t,"handleKeyUp")):(r.removeAttr("tabIndex"),(n=o(t,"handleFocus"))&&r.off("focus",n),(n=o(t,"handleBlur"))&&r.off("blur",n),(n=o(t,"handleKeydown"))&&r.off("keydown",n),(n=o(t,"handleKeyUp"))&&r.off("keyup",n))},_uiSetHandleMouseEvents:function(e){var t=this,n=t.get("el"),r;e?n.on("mouseenter",s(t,"handleMouseEnter")).on("mouseleave",s(t,"handleMouseLeave")).on("contextmenu",s(t,"handleContextMenu")).on("mousedown",s(t,"handleMouseDown")).on("mouseup",s(t,"handleMouseUp")).on("dblclick",s(t,"handleDblClick")):(r=o(t,"handleMouseEnter")&&n.off("mouseenter",r),r=o(t,"handleMouseLeave")&&n.off("mouseleave",r),r=o(t,"handleContextMenu")&&n.off("contextmenu",r),r=o(t,"handleMouseDown")&&n.off("mousedown",r),r=o(t,"handleMouseUp")&&n.off("mouseup",r),r=o(t,"handleDblClick")&&n.off("dblclick",r))},_uiSetFocused:function(e){e&&this.getKeyEventTarget()[0].focus()},_uiSetVisible:function(e){var t=this,n=t.get("el"),r=t.get("visibleMode");if(r==="visibility"){if(e){var i=t.get("cachePosition");i&&t.set("xy",i)}if(!e){var i=[t.get("x"),t.get("y")];t.set("cachePosition",i),t.set("xy",[-999,-999])}}},_uiSetChildren:function(e){var t=this,n=BUI.cloneObject(e);t._initChildren(n)},enable:function(){return this.set("disabled",!1),this},disable:function(){return this.set("disabled",!0),this},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(e,t){var n=this,r=n.get("children"),i;return t===undefined&&(t=r.length),n.fire("beforeAddChild",{child:e,index:t}),i=r[t]&&r[t].get("el")||null,e=f(n,e,i),r.splice(t,0,e),n.get("rendered")&&e.render(),n.fire("afterAddChild",{child:e,index:t}),e},remove:function(e){var t=this,n=t.get("parent");return n?n.removeChild(t,e):e&&t.destroy(),t},removeChild:function(e,t){var n=this,r=n.get("children"),i=BUI.Array.indexOf(e,r);if(i===-1)return;return n.fire("beforeRemoveChild",{child:e,destroy:t}),i!==-1&&r.splice(i,1),t&&e.destroy&&e.destroy(),n.fire("afterRemoveChild",{child:e,destroy:t}),e},removeChildren:function(e){var t=this,n,r=[].concat(t.get("children"));for(n=0;n<r.length;n++)t.removeChild(r[n],e)},getChildAt:function(e){var t=this.get("children");return t[e]||null},getChild:function(e,t){return this.getChildBy(function(t){return t.get("id")===e},t)},getChildBy:function(e,t){return this.getChildrenBy(e,t)[0]||null},getAppendHeight:function(){var e=this.get("el");return e.outerHeight()-e.height()},getAppendWidth:function(){var e=this.get("el");return e.outerWidth()-e.width()},getChildrenBy:function(e,t){var n=this,r=[];return e?(n.eachChild(function(n){e(n)?r.push(n):t&&(r=r.concat(n.getChildrenBy(e,t)))}),r):r},eachChild:function(e){BUI.each(this.get("children"),e)},handleDblClick:function(e){this.performActionInternal(e),this.isChildrenElement(e.target)||this.fire("dblclick",{domTarget:e.target,domEvent:e})},handleMouseOver:function(e){var t=this,n=t.get("el");h(e,n)||t.handleMouseEnter(e)},handleMouseOut:function(e){var t=this,n=t.get("el");h(e,n)||t.handleMouseLeave(e)},handleMouseEnter:function(e){var t=this;this.set("highlighted",!!e),t.fire("mouseenter",{domTarget:e.target,domEvent:e})},handleMouseLeave:function(e){var t=this;t.set("active",!1),t.set("highlighted",!e),t.fire("mouseleave",{domTarget:e.target,domEvent:e})},handleMouseDown:function(e){var t=this,n,r=e.which===1,i;r&&(i=t.getKeyEventTarget(),t.get("activeable")&&t.set("active",!0),t.get("focusable")&&(i[0].focus(),t.set("focused",!0)),t.get("allowTextSelection")||(n=e.target.nodeName,n=n&&n.toLowerCase(),n!=="input"&&n!=="textarea"&&e.preventDefault()),t.isChildrenElement(e.target)||t.fire("mousedown",{domTarget:e.target,domEvent:e}))},handleMouseUp:function(e){var t=this,n=t.isChildrenElement(e.target);t.get("active")&&e.which===1&&(t.performActionInternal(e),t.set("active",!1),n||t.fire("click",{domTarget:e.target,domEvent:e})),n||t.fire("mouseup",{domTarget:e.target,domEvent:e})},handleContextMenu:function(e){},handleFocus:function(e){this.set("focused",!!e),this.fire("focus",{domEvent:e,domTarget:e.target})},handleBlur:function(e){this.set("focused",!e),this.fire("blur",{domEvent:e,domTarget:e.target})},handleKeyEventInternal:function(e){var t=this,n=t.isChildrenElement(e.target);if(e.which===13)return n||t.fire("click",{domTarget:e.target,domEvent:e}),this.performActionInternal(e);n||t.fire("keydown",{domTarget:e.target,domEvent:e})},handleKeydown:function(e){var t=this;if(t.handleKeyEventInternal(e))return e.halt(),!0},handleKeyUp:function(e){var t=this;t.isChildrenElement(e.target)||t.fire("keyup",{domTarget:e.target,domEvent:e})},performActionInternal:function(e){},destructor:function(){var e=this,t,r,i,s=e.get("children");t=e.get("id");for(r=0;r<s.length;r++)s[r].destroy&&s[r].destroy();e.get("view").destroy(),n.removeComponent(t)}},{ATTRS:{content:{view:1},elTagName:{view:!0,value:"div"},defaultChildClass:{},xtype:{},id:{view:!0},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{click:!0,dblclick:!0,mouseenter:!0,mouseleave:!0,keydown:!0,keyup:!0,focus:!1,blur:!1,mousedown:!0,mouseup:!0,show:!1,hide:!1}},render:{view:1},statusCls:{view:!0,value:{}},visibleMode:{view:1,value:"display"},visible:{value:!0,view:1},handleMouseEvents:{value:!0},focusable:{value:!1,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:!0}},loader:{getter:function(e){var t=this,n;return e&&!e.isLoader&&(e.target=t,n=t.get("defaultLoaderCfg"),e=new i(BUI.merge(n,e)),t.setInternal("loader",e)),e}},allowTextSelection:{value:!0},activeable:{value:!0},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:!1,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(e){this.addTarget(e)}},disabled:{view:1,value:!1},xview:{value:r}},PARSER:{visible:function(e){var t=this,n=e.css("display"),r=e.css("visibility"),i=t.get("visibleMode");return n=="none"&&i=="display"||r=="hidden"&&i=="visibility"?!1:!0}}},{xclass:"controller",priority:0});return p}),define("bui/cookie",function(){function i(e){return typeof e=="string"&&e!==""}var e=document,t=864e5,n=encodeURIComponent,r=decodeURIComponent,s={get:function(t){var n,s;return i(t)&&(s=String(e.cookie).match(new RegExp("(?:^| )"+t+"(?:(?:=([^;]*))|;|$)")))&&(n=s[1]?r(s[1]):""),n},set:function(r,s,o,u,a,f){var l=String(n(s)),c=o;typeof c=="number"&&(c=new Date,c.setTime(c.getTime()+o*t)),c instanceof Date&&(l+="; expires="+c.toUTCString()),i(u)&&(l+="; domain="+u),i(a)&&(l+="; path="+a),f&&(l+="; secure"),e.cookie=r+"="+l},remove:function(e,t,n,r){this.set(e,"",-1,t,n,r)}};return BUI.Cookie=s,s}),function(){var e="bui/data/";define("bui/data",["bui/common",e+"sortable",e+"proxy",e+"abstractstore",e+"store",e+"node",e+"treestore"],function(t){var n=t("bui/common"),r=n.namespace("Data");return n.mix(r,{Sortable:t(e+"sortable"),Proxy:t(e+"proxy"),AbstractStore:t(e+"abstractstore"),Store:t(e+"store"),Node:t(e+"node"),TreeStore:t(e+"treestore")}),r})}(),define("bui/data/sortable",function(){var e="ASC",t="DESC",n=function(){};return n.ATTRS={compareFunction:{value:function(e,t){return e===undefined&&(e=""),t===undefined&&(t=""),BUI.isString(e)?e.localeCompare(t):e>t?1:e===t?0:-1}},sortField:{},sortDirection:{value:"ASC"},sortInfo:{getter:function(){var e=this,t=e.get("sortField");return{field:t,direction:e.get("sortDirection")}},setter:function(e){var t=this;t.set("sortField",e.field),t.set("sortDirection",e.direction)}}},BUI.augment(n,{compare:function(t,n,r,i){var s=this,o;return r=r||s.get("sortField"),i=i||s.get("sortDirection"),!r||!i?1:(o=i===e?1:-1,s.get("compareFunction")(t[r],n[r])*o)},getSortData:function(){},sortData:function(e,t,n){var r=this,n=n||r.getSortData();return BUI.isArray(e)&&(n=e,e=null),e=e||r.get("sortField"),t=t||r.get("sortDirection"),r.set("sortField",e),r.set("sortDirection",t),!e||!t?n:(n.sort(function(n,i){return r.compare(n,i,e,t)}),n)}}),n}),define("bui/data/proxy",["bui/data/sortable"],function(e){var t=e("bui/data/sortable"),n=function(e){n.superclass.constructor.call(this,e)};n.ATTRS={},BUI.extend(n,BUI.Base),BUI.augment(n,{_read:function(e,t){},read:function(e,t,n){var r=this;n=n||r,r._read(e,function(e){t.call(n,e)})},update:function(e,t,n){}});var r=function(e){r.superclass.constructor.call(this,e)};r.ATTRS=BUI.mix(!0,n.ATTRS,{limitParam:{value:"limit"},startParam:{value:"start"},pageIndexParam:{value:"pageIndex"},dataType:{value:"json"},method:{value:"GET"},cache:{value:!1},url:{}}),BUI.extend(r,n),BUI.augment(r,{_processParams:function(e){var t=this,n=["start","limit","pageIndex"];BUI.each(n,function(n){var r=t.get(n+"Param");r!==n&&(e[r]=e[n],delete e[n])})},_read:function(e,t){var n=this;e=BUI.cloneObject(e),n._processParams(e),$.ajax({url:n.get("url"),type:n.get("method"),dataType:n.get("dataType"),data:e,cache:n.get("cache"),success:function(e){t(e)},error:function(e,n,r){var i={exception:{status:n,errorThrown:r,jqXHR:e}};t(i)}})}});var i=function(e){i.superclass.constructor.call(this,e)};return BUI.extend(i,n),BUI.mixin(i,[t]),BUI.augment(i,{_read:function(e,t){var n=this,r=e.pageable,i=e.start,s=e.sortField,o=e.sortDirection,u=e.limit,a=n.get("data"),f=[];n.sortData(s,o),u?(f=a.slice(i,i+u),t({rows:f,results:a.length})):(f=a.slice(i),t(f))}}),n.Ajax=r,n.Memery=i,n}),define("bui/data/abstractstore",["bui/common","bui/data/proxy"],function(e){function r(e){r.superclass.constructor.call(this,e),this._init()}var t=e("bui/common"),n=e("bui/data/proxy");return r.ATTRS={autoLoad:{value:!1},lastParams:{value:{}},params:{},proxy:{value:{}},url:{},events:{value:["acceptchanges","load","beforeload","beforeProcessLoad","add","exception","remove","update","localsort"]},data:{setter:function(e){var t=this,n=t.get("proxy");n.set?n.set("data",e):n.data=e,t.set("autoLoad",!0)}}},t.extend(r,t.Base),t.augment(r,{isStore:!0,_init:function(){var e=this;e.beforeInit(),e._initParams(),e._initProxy(),e._initData()},beforeInit:function(){},_initData:function(){var e=this,t=e.get("autoLoad");t&&e.load()},_initParams:function(){var e=this,n=e.get("lastParams"),r=e.get("params");t.mix(n,r)},_initProxy:function(){var e=this,t=e.get("url"),r=e.get("proxy");r instanceof n||(t&&(r.url=t),r.type==="ajax"||r.url?r=new n.Ajax(r):r=new n.Memery(r),e.set("proxy",r))},load:function(e,n){var r=this,i=r.get("proxy"),s=r.get("lastParams");t.mix(!0,s,r.getAppendParams(),e),r.fire("beforeload",{params:s}),e=t.cloneObject(s),i.read(s,function(t){r.onLoad(t,e),n&&n(t,e)},r)},onLoad:function(e,t){var n=this,r=n.processLoad(e,t);r&&n.afterProcessLoad(e,t)},processLoad:function(e,t){var n=this,r=n.get("hasErrorProperty");return n.fire("beforeProcessLoad",e),e[r]||e.exception?(n.onException(e),!1):!0},afterProcessLoad:function(e,t){},onException:function(e){var t=this,n=t.get("errorProperty"),r={};e.exception?(r.type="exception",r[n]=e.exception):(r.type="error",r[n]=e[n]),t.fire("exception",r)},hasData:function(){},getAppendParams:function(){return{}}}),r}),define("bui/data/node",["bui/common"],function(e){function n(e,n){var r={};return n?(t.each(e,function(e,t){var i=n[t]||t;r[i]=e}),r.record=e):r=e,r}function r(e,r){var i=this;e=n(e,r),t.mix(this,e)}var t=e("bui/common");return t.augment(r,{root:!1,leaf:!1,text:"",id:null,loaded:!1,path:null,parent:null,level:0,record:null,children:null,isNode:!0}),r}),define("bui/data/treestore",["bui/common","bui/data/node","bui/data/abstractstore","bui/data/proxy"],function(e){function s(e){s.superclass.constructor.call(this,e)}var t=e("bui/common"),n=e("bui/data/node"),r=e("bui/data/proxy"),i=e("bui/data/abstractstore");return s.ATTRS={root:{},map:{},dataProperty:{value:"nodes"},events:{value:["add","update","remove","load"]}},t.extend(s,i),t.augment(s,{beforeInit:function(){this.initRoot()},_initData:function(){var e=this,t=e.get("autoLoad"),n=e.get("root");t&&!n.children&&(params=n.id?{id:n.id}:{},e.load(params))},initRoot:function(){var e=this,t=e.get("map"),r=e.get("root");r||(r={}),r.isNode||(r=new n(r,t)),r.path=[r.id],r.level=0,r.children&&e.setChildren(r,r.children),e.set("root",r)},add:function(e,t,n){var r=this;return e=r._add(e,t,n),r.fire("add",{node:e,index:n}),e},_add:function(e,r,i){r=r||this.get("root");var s=this,o=s.get("map"),u=r.children,a=e.children||[];return a.length==0&&e.leaf==null&&(e.leaf=!0),r&&(r.leaf=!1),e.isNode||(e=new n(e,o)),e.parent=r,e.level=r.level+1,e.path=r.path.concat(e.id),i=i==null?r.children.length:i,t.Array.addAt(u,e,i),s.setChildren(e,a),e},remove:function(e){var n=e.parent||_self.get("root"),r=t.Array.indexOf(e,n.children);return t.Array.remove(n.children,e),n.children.length===0&&(n.leaf=!0),this.fire("remove",{node:e,index:r}),e.parent=null,e},update:function(e){this.fire("update",{node:e})},getResult:function(){return this.get("root").children},setResult:function(e){var t=this,n=t.get("proxy"),i=t.get("root");n instanceof r.Memery?(t.set("data",e),t.load({id:i.id})):t.setChildren(i,e)},setChildren:function(e,n){var r=this;e.children=[];if(!n.length)return;t.each(n,function(t){r._add(t,e)})},findNode:function(e,n,r){var i=this;r=r==null?!0:r;if(!n){var s=i.get("root");return s.id===e?s:i.findNode(e,s)}var o=n.children,u=null;return t.each(o,function(t){t.id===e?u=t:r&&(u=i.findNode(e,t));if(u)return!1}),u},findNodesBy:function(e,n){var r=this,i,s=[];return n||(n=r.get("root")),t.each(n.children,function(t){e(t)&&s.push(t),s=s.concat(r.findNodesBy(e,t))}),s},findNodeByPath:function(e){if(!e)return null;var t=this,n=t.get("root"),r=e.split(","),i,s,o=r[0];if(!o)return null;n.id==o?i=n:i=t.findNode(o,n,!1);if(!i)return;for(s=1;s<r.length;s+=1){var o=r[s];i=t.findNode(o,i,!1);if(!i)break}return i},contains:function(e,t){var n=this,r=n.findNode(e.id,t);return!!r},afterProcessLoad:function(e,n){var r=this,i=n.id,s=r.get("dataProperty"),o=r.findNode(i)||r.get("root");t.isArray(e)?r.setChildren(o,e):r.setChildren(o,e[s]),r.fire("load",{node:o,params:n})},hasData:function(){return!0},isLoaded:function(e){return this.get("url")?e.leaf||e.children&&e.children.length:!0},loadNode:function(e){var t=this;if(t.isLoaded(e))return;if(!t.get("url"))return;t.load({id:e.id,path:""})},loadPath:function(e){var t=this,n=e.split(","),r=n[0];if(t.findNodeByPath(e))return;t.load({id:r,path:e})}}),s}),define("bui/data/store",["bui/data/proxy","bui/data/abstractstore","bui/data/sortable"],function(e){function i(e,t){if(e<0)return;var n=t,r=n[e];return n.splice(e,1),r}function s(e,t){var n=BUI.Array.indexOf(e,t);n>=0&&i(n,t)}function o(e,t){return BUI.Array.indexOf(e,t)!==-1}var t=e("bui/data/proxy"),n=e("bui/data/abstractstore"),r=e("bui/data/sortable"),u=function(e){u.superclass.constructor.call(this,e)};return u.ATTRS={currentPage:{value:0},deletedRecords:{value:[]},errorProperty:{value:"error"},hasErrorProperty:{value:"hasError"},matchFunction:{value:function(e,t){return e==t}},modifiedRecords:{value:[]},newRecords:{value:[]},remoteSort:{value:!1},resultMap:{value:{}},root:{value:"rows"},rowCount:{value:0},totalProperty:{value:"results"},start:{value:0},pageSize:{}},BUI.extend(u,n),BUI.mixin(u,[r]),BUI.augment(u,{add:function(e,t,n){var r=this,i=r.getCount();r.addAt(e,i,t,n)},addAt:function(e,t,n,r){var i=this;r=r||i._getDefaultMatch(),BUI.isArray(e)||(e=[e]),$.each(e,function(e,o){if(!n||!i.contains(o,r))i._addRecord(o,e+t),i.get("newRecords").push(o),s(o,i.get("deletedRecords")),s(o,i.get("modifiedRecords"))})},contains:function(e,t){return this.findIndexBy(e,t)!==-1},find:function(e,t){var n=this,r=null,i=n.getResult();return $.each(i,function(n,i){if(i[e]===t)return r=i,!1}),r},findAll:function(e,t){var n=this,r=[],i=n.getResult();return $.each(i,function(n,i){i[e]===t&&r.push(i)}),r},findByIndex:function(e){return this.getResult()[e]},findIndexBy:function(e,t){var n=this,r=-1,i=n.getResult();return t=t||n._getDefaultMatch(),e===null||e===undefined?-1:($.each(i,function(n,i){if(t(e,i))return r=n,!1}),r)},findNextRecord:function(e){var t=this,n=t.findIndexBy(e);if(n>=0)return t.findByIndex(n+1);return},getCount:function(){return this.getResult().length},getTotalCount:function(){var e=this,t=e.get("resultMap"),n=e.get("totalProperty");return t[n]||0},getResult:function(){var e=this,t=e.get("resultMap"),n=e.get("root");return t[n]},hasData:function(){return this.getCount()!==0},setResult:function(e){var n=this,r=n.get("proxy");r instanceof t.Memery?(n.set("data",e),n.load({start:0})):n._setResult(e)},remove:function(e,t){var n=this,r=[];t=t||n._getDefaultMatch(),BUI.isArray(e)||(e=[e]),$.each(e,function(e,r){var e=n.findIndexBy(r,t),u=i(e,n.getResult());!o(u,n.get("newRecords"))&&!o(u,n.get("deletedRecords"))&&n.get("deletedRecords").push(u),s(u,n.get("newRecords")),s(u,n.get("modifiedRecords")),n.fire("remove",{record:u})})},sort:function(e,t){var n=this,r=n.get("remoteSort");r?(n.set("sortField",e),n.set("sortDirection",t),n.load(n.get("sortInfo"))):n._localSort(e,t)},sum:function(e,t){var n=this,r=t||n.getResult(),i=0;return BUI.each(r,function(t){var n=t[e];isNaN(n)||(i+=parseFloat(n))}),i},setValue:function(e,t,n){var r=e,i=this;r[t]=n,!o(r,i.get("newRecords"))&&!o(r,i.get("modifiedRecords"))&&i.get("modifiedRecords").push(r),i.fire("update",{record:r,field:t,value:n})},update:function(e,t){var n=e,r=this,i=null,s=null;t&&(i=r._getDefaultMatch(),s=r.findIndexBy(e,i),s>=0&&(n=r.getResult()[s])),n=BUI.mix(n,e),!o(n,r.get("newRecords"))&&!o(n,r.get("modifiedRecords"))&&r.get("modifiedRecords").push(n),r.fire("update",{record:n})},_addRecord:function(e,t){var n=this.getResult();t==undefined&&(t=n.length),n.splice(t,0,e),this.fire("add",{record:e,index:t})},_clearChanges:function(){var e=this;e.get("newRecords").splice(0),e.get("modifiedRecords").splice(0),e.get("deletedRecords").splice(0)},_getDefaultMatch:function(){return this.get("matchFunction")},_getPageParams:function(){var e=this,t=e.get("sortInfo"),n=e.get("start"),r=e.get("pageSize"),i=e.get("pageIndex")||(r?n/r:0);return params={start:n,limit:r,pageIndex:i},e.get("remoteSort")&&BUI.mix(params,t),params},getAppendParams:function(){return this._getPageParams()},beforeInit:function(){this._setResult([])},_localSort:function(e,t){var n=this;n._sortData(e,t),n.fire("localsort")},_sortData:function(e,t,n){var r=this;n=n||r.getResult(),r.sortData(e,t,n)},afterProcessLoad:function(e,t){var n=this,r=n.get("root"),i=t.start,s=t.limit,o=n.get("totalProperty");BUI.isArray(e)?n._setResult(e):n._setResult(e[r],e[o]),n.set("start",i),s&&n.set("pageIndex",i/s),n.get("remoteSort")||n._sortData(),n.fire("load",{params:t})},_setResult:function(e,t){var n=this,r=n.get("resultMap");t=t||e.length,r[n.get("root")]=e,r[n.get("totalProperty")]=t,n._clearChanges()}}),u}),define("bui/overlay",["bui/common","bui/overlay/overlay","bui/overlay/dialog","bui/overlay/message"],function(e){var t=e("bui/common"),n=t.namespace("Overlay");return t.mix(n,{Overlay:e("bui/overlay/overlay"),Dialog:e("bui/overlay/dialog"),Message:e("bui/overlay/message")}),t.mix(n,{OverlayView:n.Overlay.View,DialogView:n.Dialog.View}),t.Message=t.Overlay.Message,n}),define("bui/overlay/overlay",["bui/common"],function(e){var t=e("bui/common"),n=t.Component,r="x-align-arrow",i=n.UIBase,s=n.View.extend([i.PositionView,i.CloseView]),o=n.Controller.extend([i.Position,i.Align,i.Close,i.AutoShow,i.AutoHide],{renderUI:function(){var e=this,t=e.get("el"),n=e.get("arrowContainer"),r=n?t.one(n):t;e.get("showArrow")&&$(e.get("arrowTpl")).appendTo(r)},show:function(){function u(){e.set("visible",!0),t.callback&&t.callback.call(e)}var e=this,t=e.get("effect"),n=e.get("el"),r=e.get("visibleMode"),i=t.effect,s=t.duration;if(r==="visibility"){o.superclass.show.call(e),t.callback&&t.callback.call(e);return}e.get("rendered")||(e.set("visible",!0),e.render(),e.set("visible",!1),n=e.get("el"));switch(i){case"linear":n.show(s,u);break;case"fade":n.fadeIn(s,u);break;case"slide":n.slideDown(s,u);break;default:u()}},hide:function(){function s(){e.set("visible",!1),t.callback&&t.callback.call(e)}var e=this,t=e.get("effect"),n=e.get("el"),r=t.effect,i=t.duration;if(e.get("visibleMode")==="visibility"){s();return}switch(r){case"linear":n.hide(i,s);break;case"fade":n.fadeOut(i,s);break;case"slide":n.slideUp(i,s);break;default:s()}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},closable:{value:!1},showArrow:{value:!1},arrowContainer:{view:!0},arrowTpl:{value:'<s class="'+r+'"><s class="'+r+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:!1},xview:{value:s}}},{xclass:"overlay"});return o.View=s,o}),define("bui/overlay/dialog",["bui/overlay/overlay"],function(e){var t=e("bui/overlay/overlay"),n=BUI.Component.UIBase,r="header-title",i=BUI.prefix,s=20,o=t.View.extend([n.StdModView,n.MaskView],{_uiSetTitle:function(e){var t=this,n=t.get("el");n.find("."+r).html(e)},_uiSetContentId:function(e){var t=this,n=t.get("body"),r=$("#"+e).children();r.appendTo(n)},_uiSetHeight:function(e){var t=this,n=e,r=t.get("header"),i=t.get("body"),o=t.get("footer");n-=r.outerHeight()+o.outerHeight(),n-=s*2,i.height(n)},_removeContent:function(){var e=this,t=e.get("body"),n=e.get("contentId");n?t.children().appendTo($("#"+n)):t.children().remove()}},{xclass:"dialog-view"}),u=t.extend([n.StdMod,n.Mask,n.Drag],{show:function(){var e=this;u.superclass.show.call(this),e.center()},bindUI:function(){var e=this;e.on("closeclick",function(){return e.onCancel()})},onCancel:function(){var e=this,t=e.get("cancel");return t.call(this)},_uiSetButtons:function(e){var t=this,n=t.get("footer");n.children().remove(),BUI.each(e,function(e){t._createButton(e,n)})},_createButton:function(e,t){var n=this,r='<button class="'+e.elCls+'">'+e.text+"</button>",i=$(r).appendTo(t);i.on("click",function(){e.handler.call(n,n,this)})},destructor:function(){var e=this,t=e.get("contentId"),n=e.get("body"),r=e.get("closeAction");r=="destroy"&&(e.hide(),t&&n.children().appendTo("#"+t))}},{ATTRS:{closeTpl:{view:!0,value:'<a tabindex="0" href=javascript:void("\u5173\u95ed") role="button" class="'+i+'ext-close" style=""><span class="'+i+'ext-close-x x-icon x-icon-normal">\u00d7</span></a>'},buttons:{value:[{text:"\u786e\u5b9a",elCls:"button button-primary",handler:function(){var e=this,t=e.get("success");t&&t.call(e)}},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:function(e,t){this.onCancel()!==!1&&this.close()}}]},contentId:{view:!0},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},defaultLoaderCfg:{valueFn:function(){var e=this;return{property:"bodyContent",autoLoad:!1,lazyLoad:{event:"show"},loadMask:{el:e.get("body")}}}},title:{view:!0,value:""},mask:{value:!0},maskShared:{value:!1},headerContent:{value:'<div class="'+r+'">\u6807\u9898</div>'},footerContent:{},closable:{value:!0},xview:{value:o}}},{xclass:"dialog"});return u.View=o,u}),define("bui/overlay/message",["bui/overlay/dialog"],function(e){function o(e,t){return function(n,r,i){BUI.isString(r)&&(i=r,r=null),i=i||t,r=r||f,u({buttons:e,icon:i,msg:n,success:r})}}function u(e){s.set(e),s.show()}function a(){var e=this,t=e.get("success");t&&(t.call(e),e.hide())}function f(){this.hide()}var t=e("bui/overlay/dialog"),n=BUI.prefix,r={info:"i",error:"\u00d7",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"},i=t.extend({renderUI:function(){this._setContent()},bindUI:function(){var e=this,t=e.get("body");e.on("afterVisibleChange",function(n){if(n.newVal&&BUI.UA.ie<8){var r=t.outerWidth();BUI.UA.ie==6&&(r=r>350?350:r),e.get("header").width(r-20),e.get("footer").width(r)}})},_setContent:function(){var e=this,t=e.get("body"),n=BUI.substitute(e.get("contentTpl"),{msg:e.get("msg"),iconTpl:e.get("iconTpl")});t.empty(),$(n).appendTo(t)},_uiSetIcon:function(e){if(!this.get("rendered"))return;this._setContent()},_uiSetMsg:function(e){if(!this.get("rendered"))return;this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var e=this,t=e.get("icon");return'<div class="x-icon x-icon-'+t+'">'+r[t]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+n+'message-content">{msg}</div>'}}},{xclass:"message",priority:0}),s=new i({icon:"info",title:""}),l=o([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:a}],"info"),c=o([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:a},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:f}],"question");return i.Alert=l,i.Confirm=c,i.Show=u,i}),function(){var e="bui/list/";define("bui/list",["bui/common",e+"list",e+"listitem",e+"simplelist",e+"listbox"],function(t){var n=t("bui/common"),r=n.namespace("List");return n.mix(r,{List:t(e+"list"),ListItem:t(e+"listitem"),SimpleList:t(e+"simplelist"),Listbox:t(e+"listbox")}),n.mix(r,{ListItemView:r.ListItem.View,SimpleListView:r.SimpleList.View}),r})}(),define("bui/list/domlist",["bui/common"],function(e){"use strict";function s(e,t){var n=t,r=n.get("itemCls"),i=n.get("itemStatusCls");return i&&i[e]?i[e]:r+"-"+e}function u(e,n){var i=e.attributes,o=n.get("itemStatusFields"),u={};return t.each(i,function(e){var t=e.nodeName;t.indexOf(r)!==-1&&(t=t.replace(r,""),u[t]=e.nodeValue)}),u.text=$(e).text(),t.each(o,function(t,r){var i=s(r,n);$(e).hasClass(i)&&(u[t]=!0)}),u}var t=e("bui/common"),n=t.Component.UIBase.Selection,r="data-",i=t.Component.UIBase.List,o=function(){};o.ATTRS={items:{}},o.prototype={clearControl:function(){var e=this,t=e.getItemContainer(),n=e.get("itemCls");t.find("."+n).remove()},addItem:function(e,t){return this._createItem(e,t)},getItems:function(){var e=this,n=e.getAllElements(),r=[];return t.each(n,function(t){r.push(e.getItemByElement(t))}),r},updateItem:function(e){var n=this,r=n.getItems(),i=t.Array.indexOf(e,r),s=null,o;return i>=0&&(s=n.findElement(e),o=n.getItemTpl(e,i),s&&$(s).html($(o).html())),s},removeItem:function(e,t){t=t||this.findElement(e),$(t).remove()},getItemContainer:function(){return this.get("itemContainer")||this.get("el")},getItemTpl:function(e,n){var r=this,i=r.get("itemTplRender"),s=r.get("itemTpl");return i?i(e,n):t.substitute(s,e)},_createItem:function(e,t){var n=this,r=n.getItemContainer(),i=n.get("itemCls"),s=n.get("dataField"),o=n.getItemTpl(e,t),u=$(o);if(t!==undefined){var a=r.find("."+i)[t];a?u.insertBefore(a):u.appendTo(r)}else u.appendTo(r);return u.addClass(i),u.data(s,e),u},getItemStatusCls:function(e){return s(e,this)},setItemStatusCls:function(e,t,n){var r=this,i=r.getItemStatusCls(e),s=n?"addClass":"removeClass";t&&$(t)[s](i)},hasStatus:function(e,t){var n=this,r=n.getItemStatusCls(e);return $(t).hasClass(r)},setItemSelected:function(e,t,n){var r=this;n=n||r.findElement(e),r.setItemStatusCls("selected",n,t)},getAllElements:function(){var e=this,t=e.get("itemCls"),n=e.get("el");return n.find("."+t)},getItemByElement:function(e){var t=this,n=t.get("dataField");return $(e).data(n)},getFirstElementByStatus:function(e){var t=this,n=t.getItemStatusCls(e),r=t.get("el");return r.find("."+n)[0]},getElementsByStatus:function(e){var t=this,n=t.getItemStatusCls(e),r=t.get("el");return r.find("."+n)},getSelectedElements:function(){var e=this,t=e.getItemStatusCls("selected"),n=e.get("el");return n.find("."+t)},findElement:function(e){var n=this,r=n.getAllElements(),i=null;return t.each(r,function(t){if(n.getItemByElement(t)==e)return i=t,!1}),i},isElementSelected:function(e){var t=this,n=t.getItemStatusCls("selected");return e&&$(e).hasClass(n)}};var a=function(){};return a.ATTRS=t.merge(!0,i.ATTRS,n.ATTRS,{dataField:{view:!0,value:"data-item"},itemContainer:{view:!0},itemStatusFields:{value:{}},itemCls:{view:!0},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{itemrendered:!0,itemremoved:!0,itemupdated:!0,itemsshow:!1,beforeitemsshow:!1,itemsclear:!1,beforeitemsclear:!1}}}),a.PARSER={items:function(e){var n=this,r=[],i=n.get("itemCls"),s=n.get("dataField"),o=e.find("."+i);return t.each(o,function(e){var t=u(e,n);r.push(t),$(e).data(s,t)}),r}},t.augment(a,i,n,{_uiSetItems:function(e){var t=this;if(t.get("srcNode")&&!t.get("rendered"))return;this.setItems(e)},__bindUI:function(){function i(t,n){var r=e.get("multipleSelect"),i;i=e.isItemSelected(t,n),i?r&&e.setItemSelected(t,!1,n):(r||e.clearSelected(),e.setItemSelected(t,!0,n))}var e=this,t=e.get("selectedEvent"),n=e.get("itemCls"),r=e.get("view").getItemContainer();r.delegate("."+n,"click",function(n){var r=$(n.currentTarget),s=e.getItemByElement(r);if(e.isItemDisabled(s,r))return;var o=e.fire("itemclick",{item:s,element:r[0],domTarget:n.target});o!==!1&&t=="click"&&i(s,r)}),t!=="click"&&r.delegate("."+n,t,function(t){var n=$(t.currentTarget),r=e.getItemByElement(n);if(e.isItemDisabled(r,n))return;i(r,n)}),r.delegate("."+n,"dblclick",function(t){var n=$(t.currentTarget),r=e.getItemByElement(n);if(e.isItemDisabled(r,n))return;e.fire("itemdblclick",{item:r,element:n[0],domTarget:t.target})}),e.on("itemrendered itemupdated",function(t){var n=t.item,r=t.element;e._syncItemStatus(n,r)})},getValueByField:function(e,t){return e&&e[t]},_syncItemStatus:function(e,n){var r=this,i=r.get("itemStatusFields");t.each(i,function(t,i){r.get("view").setItemStatusCls(i,n,e[t])})
},getStatusValue:function(e,t){var n=this,r=n.get("itemStatusFields"),i=r[t];return e[i]},getCount:function(){var e=this.getItems();return e?e.length:0},getStatusField:function(e){var t=this,n=t.get("itemStatusFields");return n[e]},setStatusValue:function(e,t,n){var r=this,i=r.get("itemStatusFields"),s=i[t];s&&(e[s]=n)},getItemText:function(e){var t=this,n=t.get("textGetter");return e?n?n(e):$(t.findElement(e)).text():""},removeItem:function(e){var n=this,r=n.get("items"),i=n.findElement(e),s;s=t.Array.indexOf(e,r),s!==-1&&r.splice(s,1),n.get("view").removeItem(e,i),n.fire("itemremoved",{item:e,domTarget:$(i)[0],element:i})},addItemAt:function(e,t){var n=this,r=n.get("items");return t===undefined&&(t=r.length),r.splice(t,0,e),n.addItemToView(e,t),e},addItemToView:function(e,t){var n=this,r=n.get("view").addItem(e,t);n.fire("itemrendered",{item:e,domTarget:$(r)[0],element:r})},updateItem:function(e){var t=this,n=t.get("view").updateItem(e);t.fire("itemupdated",{item:e,domTarget:$(n)[0],element:n})},setItems:function(e){var n=this;n.clearControl(),n.fire("beforeitemsshow"),t.each(e,function(e,t){n.addItemToView(e,t)}),n.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(e){return this.get("view").getItemByElement(e)},getSelected:function(){var e=this,t=e.get("view").getFirstElementByStatus("selected");return e.getItemByElement(t)||null},getItemsByStatus:function(e){var n=this,r=n.get("view").getElementsByStatus(e),i=[];return t.each(r,function(e){i.push(n.getItemByElement(e))}),i},findElement:function(e){var n=this;return t.isString(e)&&(e=n.getItem(e)),this.get("view").findElement(e)},findItemByField:function(e,n){var r=this,i=r.get("items"),s=null;return t.each(i,function(t){if(t[e]===n)return s=t,!1}),s},setItemSelectedStatus:function(e,t,n){var r=this;n=n||r.findElement(e),r.setItemStatus(e,"selected",t,n)},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},isItemSelected:function(e,t){var n=this;return t=t||n.findElement(e),n.get("view").isElementSelected(t)},isItemDisabled:function(e,t){return this.hasStatus(e,"disabled",t)},setItemDisabled:function(e,t){var n=this;n.setItemStatus(e,"disabled",t)},getSelection:function(){var e=this,n=e.get("view").getSelectedElements(),r=[];return t.each(n,function(t){r.push(e.getItemByElement(t))}),r},clearControl:function(){this.fire("beforeitemsclear"),this.get("view").clearControl(),this.fire("itemsclear")},hasStatus:function(e,t,n){if(!e)return!1;var r=this;return n=n||r.findElement(e),r.get("view").hasStatus(t,n)},setItemStatus:function(e,t,n,r){var i=this;e&&(r=r||i.findElement(e));if(!i.isItemDisabled(e,r)||t==="disabled")e&&(t==="disabled"&&n&&i.clearItemStatus(e),i.setStatusValue(e,t,n),i.get("view").setItemStatusCls(t,r,n),i.fire("itemstatuschange",{item:e,status:t,value:n,element:r})),t==="selected"&&i.afterSelected(e,n,r)},clearItemStatus:function(e,n,r){var i=this,s=i.get("itemStatusFields");r=r||i.findElement(e),n?i.setItemStatus(e,n,!1,r):(t.each(s,function(t,n){i.setItemStatus(e,n,!1,r)}),s.selected||i.setItemSelected(e,!1),i.setItemStatus(e,"hover",!1))}}),a.View=o,a}),define("bui/list/keynav",function(){"use strict";var e=function(){};return e.ATTRS={highlightedStatus:{value:"hover"}},BUI.augment(e,{setHighlighted:function(e,t){if(this.hasStatus(e,"hover",t))return;var n=this,r=n.get("highlightedStatus"),i=n._getHighLightedElement(),s=i?n.getItemByElement(i):null;s!==e&&(s&&this.setItemStatus(s,r,!1,i),this.setItemStatus(e,r,!0,t))},_getHighLightedElement:function(){var e=this,t=e.get("highlightedStatus"),n=e.get("view").getFirstElementByStatus(t);return n},getHighlighted:function(){var e=this,t=e.get("highlightedStatus"),n=e.get("view").getFirstElementByStatus(t);return e.getItemByElement(n)||null},getColumnCount:function(){var e=this,t=e.getFirstItem(),n=e.findElement(t),r=$(n);return n?parseInt(r.parent().width()/r.outerWidth(),10):1},getRowCount:function(e){var t=this;return e=e||t.getColumnCount(),(this.getCount()+e-1)/e},_getNextItem:function(e,t,n){var r=this,i=r._getCurrentIndex(),s=r.getCount(),o=e?1:-1,u;return i===-1?e?r.getFirstItem():r.getLastItem():(e||(t*=o),u=(i+t+n)%n,u>s-1&&(e?u-=s-1:u+=t),r.getItemAt(u))},_getLeftItem:function(){var e=this,t=e.getCount(),n=e.getColumnCount();return!t||n<=1?null:e._getNextItem(!1,1,t)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var e=this,t=e._getCurrentItem();return this.indexOfItem(t)},_getRightItem:function(){var e=this,t=e.getCount(),n=e.getColumnCount();return!t||n<=1?null:this._getNextItem(!0,1,t)},_getDownItem:function(){var e=this,t=e.getColumnCount(),n=e.getRowCount(t);return n<=1?null:this._getNextItem(!0,t,t*n)},_getUpperItem:function(){var e=this,t=e.getColumnCount(),n=e.getRowCount(t);return n<=1?null:this._getNextItem(!1,t,t*n)},handleNavUp:function(e){var t=this,n=t._getUpperItem();t.setHighlighted(n)},handleNavDown:function(e){this.setHighlighted(this._getDownItem())},handleNavLeft:function(e){this.setHighlighted(this._getLeftItem())},handleNavRight:function(e){this.setHighlighted(this._getRightItem())},handleNavEnter:function(e){var t=this,n=t._getCurrentItem();n&&t.setSelected(n)},handleNavEsc:function(e){this.setHighlighted(null)},handleNavTab:function(e){this.setHighlighted(this._getRightItem())}}),e}),define("bui/list/simplelist",["bui/common","bui/list/domlist","bui/list/keynav"],function(e){var t=e("bui/common"),n=t.Component.UIBase,r=e("bui/list/domlist"),i=e("bui/list/keynav"),s=t.prefix+"list-item",o=t.Component.View.extend([r.View],{setElementHover:function(e,t){var n=this;n.setItemStatusCls("hover",e,t)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"}),u=t.Component.Controller.extend([r,n.Bindable,i],{bindUI:function(){var e=this,t=e.get("itemCls"),n=e.get("view").getItemContainer();n.delegate("."+t,"mouseover",function(t){var n=t.currentTarget,r=e.getItemByElement(n);if(e.isItemDisabled(t.item,t.currentTarget))return;e.get("highlightedStatus")==="hover"?e.setHighlighted(r,n):e.setItemStatus(r,"hover",!0,n)}).delegate("."+t,"mouseout",function(t){var n=$(t.currentTarget);e.get("view").setElementHover(n,!1)})},onAdd:function(e){var t=this,n=e.record;t.addItemToView(n,e.index)},onRemove:function(e){var t=this,n=e.record;t.removeItem(n)},onUpdate:function(e){this.updateItem(e.record)},onLocalSort:function(e){this.onLoad(e)},onLoad:function(){var e=this,t=e.get("store"),n=t.getResult();e.set("items",n)}},{ATTRS:{items:{view:!0,value:[]},itemCls:{view:!0,value:s},idField:{value:"value"},listSelector:{view:!0,value:"ul"},itemTpl:{view:!0,value:'<li role="option" class="'+s+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:o}}},{xclass:"simple-list",prority:0});return u.View=o,u}),define("bui/list/listbox",["bui/list/simplelist"],function(e){var t=e("bui/list/simplelist"),n=t.extend({bindUI:function(){var e=this;e.on("selectedchange",function(e){var t=e.item,n=$(e.domTarget),r=n.find("input");t&&r.attr("checked",e.selected)})}},{ATTRS:{itemTpl:{value:'<li><span class="checkbox"><input type="checkbox" />{text}</span></li>'},multipleSelect:{value:!0}}},{xclass:"listbox"});return n}),define("bui/list/listitem",function(e){var t=BUI.Component,n=t.UIBase,r=t.View.extend([n.ListItemView],{}),i=t.Controller.extend([n.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:r},tpl:{view:!0,value:"<span>{text}</span>"}}},{xclass:"list-item"});return i.View=r,i}),define("bui/list/list",function(e){var t=BUI.Component,n=t.UIBase,r=t.Controller.extend([n.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});return r}),define("bui/picker",["bui/common","bui/picker/picker","bui/picker/listpicker"],function(e){var t=e("bui/common"),n=t.namespace("Picker");return t.mix(n,{Picker:e("bui/picker/picker"),ListPicker:e("bui/picker/listpicker")}),n}),define("bui/picker/picker",["bui/overlay"],function(e){var t=e("bui/overlay").Overlay,n=t.extend({bindUI:function(){var e=this,t=e.get("innerControl"),n=e.get("hideEvent"),r=$(e.get("trigger"));r.on(e.get("triggerEvent"),function(t){if(e.get("autoSetValue")){var n=e.get("valueField")||e.get("textField")||this,r=$(n).val();e.setSelectedValue(r)}}),t.on(e.get("changeEvent"),function(t){var n=e.get("curTrigger"),r=e.get("textField")||n,i=e.get("valueField"),s=e.getSelectedValue(),o=!1;if(r){var u=e.getSelectedText(),a=$(r).val();u!=a&&($(r).val(u),o=!0)}if(i){var f=$(i).val();i!=f&&($(i).val(s),o=!0)}o&&e.onChange(u,s,t)}),n&&t.on(e.get("hideEvent"),function(){var t=e.get("curTrigger");try{t&&t.focus()}catch(n){BUI.log(n)}e.hide()})},setSelectedValue:function(e){},getSelectedValue:function(){},getSelectedText:function(){},onChange:function(e,t,n){var r=this,i=r.get("curTrigger");r.fire("selectedchange",{value:t,text:e,curTrigger:i})},_uiSetValueField:function(e){var t=this;e&&t.setSelectedValue($(e).val())},_getTextField:function(){var e=this;return e.get("textField")||e.get("curTrigger")}},{ATTRS:{innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:!0},changeEvent:{value:"selectedchange"},autoHide:{value:!0},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}}},{xclass:"picker"});return n}),define("bui/picker/listpicker",["bui/picker/picker","bui/list"],function(e){var t=e("bui/list"),n=e("bui/picker/picker"),r=n.extend({initializer:function(){var e=this,t=e.get("children"),n=e.get("list");n||t.push({})},setSelectedValue:function(e){e=e?e.toString():"";var t=this,n=t.get("list"),r=t.getSelectedValue();e!==r&&n.getCount()&&(n.get("multipleSelect")&&n.clearSelection(),n.setSelectionByField(e.split(",")))},onChange:function(e,t,n){var r=this,i=r.get("curTrigger");r.fire("selectedchange",{value:t,text:e,curTrigger:i,item:n.item})},getSelectedValue:function(){return this.get("list").getSelectionValues().join(",")},getSelectedText:function(){return this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});return r}),function(){var e="bui/form/";define("bui/form",["bui/common",e+"fieldcontainer",e+"form",e+"row",e+"fieldgroup",e+"horizontal",e+"rules",e+"field",e+"fieldgroup"],function(t){var n=t("bui/common"),r=n.namespace("Form"),i=t(e+"tips");return n.mix(r,{Tips:i,TipItem:i.Item,FieldContainer:t(e+"fieldcontainer"),Form:t(e+"form"),Row:t(e+"row"),Group:t(e+"fieldgroup"),HForm:t(e+"horizontal"),Rules:t(e+"rules"),Field:t(e+"field"),FieldGroup:t(e+"fieldgroup")}),r})}(),define("bui/form/tips",["bui/common","bui/overlay"],function(e){var t=e("bui/common"),n=t.prefix,r=e("bui/overlay").Overlay,i="data-tip",s=n+"form-tip-container",o=r.extend({initializer:function(){var e=this,t=e.get("render");if(!t){var n=$(e.get("trigger")).parent();e.set("render",n)}},renderUI:function(){var e=this;e.resetVisible()},resetVisible:function(){var e=this,t=$(e.get("trigger"));t.val()?e.set("visible",!1):(e.set("align",{node:$(e.get("trigger")),points:["cl","cl"]}),e.set("visible",!0))},bindUI:function(){var e=this,t=$(e.get("trigger"));e.get("el").on("click",function(){e.hide(),t.focus()}),t.on("click focus",function(){e.hide()}),t.on("blur",function(){e.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"}),u=function(e){if(this.constructor!==u)return new u(e);u.superclass.constructor.call(this,e),this._init()};return u.ATTRS={form:{},items:{value:[]}},t.extend(u,t.Base),t.augment(u,{_init:function(){var e=this,n=$(e.get("form"));n.length&&(t.each($.makeArray(n[0].elements),function(t){var n=$(t).attr(i);n&&e._initFormElement(t,$.parseJSON(n))}),n.addClass(s))},_initFormElement:function(e,t){t&&(t.trigger=e);var n=this,r=n.get("items"),i=new o(t);r.push(i)},getItem:function(e){var n=this,r=n.get("items"),i=null;return t.each(r,function(t){if($(t.get("trigger")).attr("name")===e)return i=t,!1}),i},resetVisible:function(){var e=this,n=e.get("items");t.each(n,function(e){e.resetVisible()})},render:function(){var e=this,n=e.get("items");t.each(n,function(e){e.render()})},destroy:function(){var e=this,n=e.get(n);t.each(n,function(e){e.destroy()})}}),u.Item=o,u}),define("bui/form/basefield",["bui/common","bui/form/tips","bui/form/valid","bui/form/remote"],function(e){var t=e("bui/common"),n=t.Component,r=e("bui/form/tips").Item,i=e("bui/form/valid"),s=e("bui/form/remote"),o=t.prefix+"form-field-error",u="data-error",a=n.View.extend([s.View,i.View],{renderUI:function(){var e=this,t=e.get("control");if(!t){var n=e.get("controlTpl"),r=e.getControlContainer();if(n){var t=$(n).appendTo(r);e.set("control",t)}}else e.set("controlContainer",t.parent())},clearErrors:function(){var e=this,t=e.get("msgEl");t&&(t.remove(),e.set("msgEl",null)),e.get("el").removeClass(o)},showError:function(e,n){var r=this,i=r.get("control"),s=t.substitute(n,{error:e}),u=$(s);u.appendTo(i.parent()),r.set("msgEl",u),r.get("el").addClass(o)},getControlContainer:function(){var e=this,n=e.get("el"),r=e.get("controlContainer");return r?t.isString(r)?n.find(r):r:n},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(e){var t=this;t.get("control").attr("name",e)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}}),f=n.Controller.extend([s,i],{initializer:function(){var e=this;e.on("afterRenderUI",function(){var t=e.get("tip");t&&(t.trigger=e.getTipTigger(),t.autoRender=!0,t=new r(t),e.set("tip",t))})},bindUI:function(){var e=this,t=e.get("validEvent"),n=e.get("changeEvent"),r=e.getInnerControl();r.is("select")&&(t="change"),r.on(t,function(){var t=e.getControlValue(r);e.validControl(t)}),r.on("focus",function(){if(!e.get("hasValid")){var t=e.getControlValue(r);e.validControl(t)}}),e.on(n,function(){e.onValid()}),e.on("remotec